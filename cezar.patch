diff --git a/packages/blocks/openops-tables/src/actions/delete-record-action.ts b/packages/blocks/openops-tables/src/actions/delete-record-action.ts
index 43226f291..e3d884fd0 100644
--- a/packages/blocks/openops-tables/src/actions/delete-record-action.ts
+++ b/packages/blocks/openops-tables/src/actions/delete-record-action.ts
@@ -1,12 +1,15 @@
 import { BlockAuth, createAction, Property } from '@openops/blocks-framework';
 import {
-  authenticateDefaultUserInOpenOpsTables,
   deleteRow,
   getFields,
   getPrimaryKeyFieldFromFields,
   getRowByPrimaryKeyValue,
   getTableIdByTableName,
+  getTablesServerContext,
+  OpenOpsField,
   openopsTablesDropdownProperty,
+  resolveTokenProvider,
+  TokenOrContext,
 } from '@openops/common';
 import { cacheWrapper } from '@openops/server-shared';
 import { convertToStringWithValidation, isEmpty } from '@openops/shared';
@@ -27,26 +30,28 @@ export const deleteRecordAction = createAction({
   },
   async run(context) {
     const tableName = context.propsValue.tableName as unknown as string;
+    const tablesServerContext = getTablesServerContext(context.server);
+
     const tableCacheKey = `${context.run.id}-table-${tableName}`;
     const tableId = await cacheWrapper.getOrAdd(
       tableCacheKey,
       getTableIdByTableName,
-      [tableName],
+      [tableName, tablesServerContext],
     );
 
-    const { token } = await authenticateDefaultUserInOpenOpsTables();
+    const tokenOrContext = await resolveTokenProvider(tablesServerContext);
 
     const fieldsCacheKey = `${context.run.id}-${tableId}-fields`;
-    const fields = await cacheWrapper.getOrAdd(fieldsCacheKey, getFields, [
-      tableId,
-      token,
-    ]);
+    const fields = await cacheWrapper.getOrAdd<
+      OpenOpsField[],
+      [number, TokenOrContext]
+    >(fieldsCacheKey, getFields, [tableId, tokenOrContext]);
 
     const primaryKeyField = getPrimaryKeyFieldFromFields(fields);
     const rowPrimaryKey = getPrimaryKey(context.propsValue.rowPrimaryKey);
 
     const rowToDelete = await getRowByPrimaryKeyValue(
-      token,
+      tokenOrContext,
       tableId,
       rowPrimaryKey,
       primaryKeyField.name,
@@ -58,8 +63,8 @@ export const deleteRecordAction = createAction({
 
     return await deleteRow({
       tableId: tableId,
-      token: token,
       rowId: rowToDelete.id,
+      tokenOrContext,
     });
   },
 });
diff --git a/packages/blocks/openops-tables/src/actions/get-records-action.ts b/packages/blocks/openops-tables/src/actions/get-records-action.ts
index 3958872a2..835694740 100644
--- a/packages/blocks/openops-tables/src/actions/get-records-action.ts
+++ b/packages/blocks/openops-tables/src/actions/get-records-action.ts
@@ -1,13 +1,14 @@
 import { BlockAuth, createAction, Property } from '@openops/blocks-framework';
 import {
-  authenticateDefaultUserInOpenOpsTables,
   FilterType,
   getPropertyFromField,
   getRows,
   getTableFields,
   getTableIdByTableName,
+  getTablesServerContext,
   isSingleValueFilter,
   openopsTablesDropdownProperty,
+  resolveTokenProvider,
   ViewFilterTypesEnum,
 } from '@openops/common';
 import { cacheWrapper } from '@openops/server-shared';
@@ -41,7 +42,7 @@ export const getRecordsAction = createAction({
       displayName: '',
       required: true,
       refreshers: ['tableName'],
-      props: async ({ tableName }) => {
+      props: async ({ tableName }, ctx) => {
         if (!tableName) {
           return {};
         }
@@ -49,6 +50,7 @@ export const getRecordsAction = createAction({
 
         const tableFields = await getTableFields(
           tableName as unknown as string,
+          ctx.server,
         );
 
         properties['filters'] = Property.Array({
@@ -113,15 +115,15 @@ export const getRecordsAction = createAction({
     }),
   },
   async run(context) {
-    const { token } = await authenticateDefaultUserInOpenOpsTables();
-
     const tableName = context.propsValue.tableName as unknown as string;
 
+    const tablesServerContext = getTablesServerContext(context.server);
+
     const tableCacheKey = `${context.run.id}-table-${tableName}`;
     const tableId = await cacheWrapper.getOrAdd(
       tableCacheKey,
       getTableIdByTableName,
-      [tableName],
+      [tableName, tablesServerContext],
     );
 
     const filtersProps = context.propsValue.filters['filters'] as unknown as {
@@ -143,9 +145,11 @@ export const getRecordsAction = createAction({
     });
     const filterType = context.propsValue.filterType as FilterType;
 
+    const tokenOrContext = await resolveTokenProvider(tablesServerContext);
+
     const rows = await getRows({
       tableId: tableId,
-      token: token,
+      tokenOrContext,
       filters,
       filterType: filterType,
     });
diff --git a/packages/blocks/openops-tables/src/actions/get-table-url-action.ts b/packages/blocks/openops-tables/src/actions/get-table-url-action.ts
index 5124d43aa..d93c1693d 100644
--- a/packages/blocks/openops-tables/src/actions/get-table-url-action.ts
+++ b/packages/blocks/openops-tables/src/actions/get-table-url-action.ts
@@ -18,7 +18,7 @@ export const getTableUrlAction = createAction({
   },
   async run(context) {
     const tableName = context.propsValue.tableName as unknown as string;
-    const tableId = await getTableIdByTableName(tableName);
+    const tableId = await getTableIdByTableName(tableName, context.server);
     const baseUrl = system.getOrThrow(SharedSystemProp.FRONTEND_URL);
 
     return (
diff --git a/packages/blocks/openops-tables/src/actions/update-record-action.ts b/packages/blocks/openops-tables/src/actions/update-record-action.ts
index 804d49b2b..9d2e7b903 100644
--- a/packages/blocks/openops-tables/src/actions/update-record-action.ts
+++ b/packages/blocks/openops-tables/src/actions/update-record-action.ts
@@ -1,13 +1,15 @@
 import { BlockAuth, createAction, Property } from '@openops/blocks-framework';
 import {
-  authenticateDefaultUserInOpenOpsTables,
   getFields,
   getPrimaryKeyFieldFromFields,
   getPropertyFromField,
   getTableFields,
   getTableIdByTableName,
+  getTablesServerContext,
   OpenOpsField,
   openopsTablesDropdownProperty,
+  resolveTokenProvider,
+  TokenOrContext,
   upsertRow,
 } from '@openops/common';
 import { cacheWrapper } from '@openops/server-shared';
@@ -29,12 +31,15 @@ export const updateRecordAction = createAction({
         'The primary key value of the row to update. If the row does not exist, a new row will be created.',
       required: true,
       refreshers: ['tableName'],
-      props: async ({ tableName }) => {
+      props: async ({ tableName }, context) => {
         if (!tableName) {
           return {};
         }
 
-        const fields = await getTableFields(tableName as unknown as string);
+        const fields = await getTableFields(
+          tableName as unknown as string,
+          context.server,
+        );
 
         const primaryKeyField = getPrimaryKeyFieldFromFields(fields);
 
@@ -61,13 +66,14 @@ export const updateRecordAction = createAction({
       description: '',
       required: true,
       refreshers: ['tableName'],
-      props: async ({ tableName }) => {
+      props: async ({ tableName }, context) => {
         if (!tableName) {
           return {};
         }
 
         const tableFields = await getTableFields(
           tableName as unknown as string,
+          context.server,
         );
 
         const properties: { [key: string]: any } = {};
@@ -128,16 +134,19 @@ export const updateRecordAction = createAction({
     const tableId = await cacheWrapper.getOrAdd(
       tableCacheKey,
       getTableIdByTableName,
-      [tableName],
+      [tableName, context.server],
     );
 
-    const { token } = await authenticateDefaultUserInOpenOpsTables();
+    const tablesServerContext = getTablesServerContext(context.server);
 
     const fieldsCacheKey = `${context.run.id}-${tableId}-fields`;
-    const tableFields = await cacheWrapper.getOrAdd(fieldsCacheKey, getFields, [
-      tableId,
-      token,
-    ]);
+
+    const tokenOrContext = await resolveTokenProvider(tablesServerContext);
+
+    const tableFields = await cacheWrapper.getOrAdd<
+      OpenOpsField[],
+      [number, TokenOrContext]
+    >(fieldsCacheKey, getFields, [tableId, tokenOrContext]);
 
     const fieldsToUpdate = mapFieldsToObject(
       tableName,
@@ -152,8 +161,8 @@ export const updateRecordAction = createAction({
 
     return await upsertRow({
       tableId: tableId,
-      token: token,
       fields: fieldsToUpdate,
+      tokenOrContext,
     });
   },
 });
diff --git a/packages/blocks/openops-tables/test/actions/delete-record-action.test.ts b/packages/blocks/openops-tables/test/actions/delete-record-action.test.ts
index 600d9753a..5c6eec9cc 100644
--- a/packages/blocks/openops-tables/test/actions/delete-record-action.test.ts
+++ b/packages/blocks/openops-tables/test/actions/delete-record-action.test.ts
@@ -18,6 +18,15 @@ const openopsCommonMock = {
     type: 'DROPDOWN',
   }),
   deleteRow: jest.fn(),
+  getTablesServerContext: jest.fn((server) => ({
+    tablesDatabaseId: server?.tablesDatabaseId,
+    tablesDatabaseToken: server?.tablesDatabaseToken,
+  })),
+  resolveTokenProvider: jest.fn(async (serverContext) => {
+    return {
+      getToken: () => serverContext.tablesDatabaseToken,
+    };
+  }),
 };
 
 jest.mock('@openops/common', () => openopsCommonMock);
@@ -65,12 +74,11 @@ describe('deleteRecordAction', () => {
     validateWrapperCall(context);
 
     expect(result).toStrictEqual('mock result');
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledTimes(1);
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledWith();
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledTimes(1);
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledWith({
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'some databaseToken',
+    });
   });
 
   test.each([[[]], [{}]])(
@@ -170,7 +178,9 @@ describe('deleteRecordAction', () => {
     );
     expect(openopsCommonMock.getRowByPrimaryKeyValue).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getRowByPrimaryKeyValue).toHaveBeenCalledWith(
-      'some databaseToken',
+      expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
       1,
       'some primary key value',
       'primary key field',
@@ -204,7 +214,9 @@ describe('deleteRecordAction', () => {
 
     expect(openopsCommonMock.getRowByPrimaryKeyValue).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getRowByPrimaryKeyValue).toHaveBeenCalledWith(
-      'some databaseToken',
+      expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
       1,
       'some primary key value',
       'primary key field',
@@ -219,25 +231,36 @@ describe('deleteRecordAction', () => {
     expect(openopsCommonMock.deleteRow).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.deleteRow).toHaveBeenCalledWith({
       tableId: 1,
-      token: 'some databaseToken',
+      tokenOrContext: expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
       rowId: 1,
     });
   });
 });
 
 function validateWrapperCall(context: any) {
+  const expectedServerContext = {
+    tablesDatabaseId: context.server.tablesDatabaseId,
+    tablesDatabaseToken: context.server.tablesDatabaseToken,
+  };
   expect(cacheWrapperMock.getOrAdd).toHaveBeenCalledTimes(2);
   expect(cacheWrapperMock.getOrAdd).toHaveBeenNthCalledWith(
     1,
     `${context.run.id}-table-${context.propsValue.tableName}`,
     getTableIdByTableName,
-    [context.propsValue.tableName],
+    [context.propsValue.tableName, expectedServerContext],
   );
   expect(cacheWrapperMock.getOrAdd).toHaveBeenNthCalledWith(
     2,
     `${context.run.id}-1-fields`,
     getFields,
-    [1, 'some databaseToken'],
+    [
+      1,
+      expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
+    ],
   );
 }
 
@@ -253,6 +276,10 @@ function createContext(params?: ContextParams) {
       tableName: params?.tableName ?? '1',
       rowPrimaryKey: params?.rowPrimaryKey ?? 'default primary key',
     },
+    server: {
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'some databaseToken',
+    },
     run: {
       id: nanoid(),
     },
diff --git a/packages/blocks/openops-tables/test/actions/get-records-action.test.ts b/packages/blocks/openops-tables/test/actions/get-records-action.test.ts
index de566d3b9..29f4dfb5c 100644
--- a/packages/blocks/openops-tables/test/actions/get-records-action.test.ts
+++ b/packages/blocks/openops-tables/test/actions/get-records-action.test.ts
@@ -24,6 +24,15 @@ const openopsCommonMock = {
       type: 'text',
     },
   ]),
+  getTablesServerContext: jest.fn((server) => ({
+    tablesDatabaseId: server?.tablesDatabaseId,
+    tablesDatabaseToken: server?.tablesDatabaseToken,
+  })),
+  resolveTokenProvider: jest.fn(async (serverContext) => {
+    return {
+      getToken: () => serverContext.tablesDatabaseToken,
+    };
+  }),
   openopsTablesDropdownProperty: jest.fn().mockReturnValue({
     required: true,
     defaultValue: false,
@@ -95,6 +104,10 @@ describe('getRecordsAction test', () => {
       expect(openopsCommonMock.getTableFields).toHaveBeenCalledTimes(1);
       expect(openopsCommonMock.getTableFields).toHaveBeenCalledWith(
         'Opportunity',
+        {
+          tablesDatabaseId: 1,
+          tablesDatabaseToken: 'token',
+        },
       );
     });
   });
@@ -110,12 +123,11 @@ describe('getRecordsAction test', () => {
 
     validateWrapperCall(context);
     expect(result).toStrictEqual({ items: [], count: 0 });
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledTimes(1);
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledWith();
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledTimes(1);
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledWith({
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'token',
+    });
   });
 
   test('should get row with the given filters', async () => {
@@ -145,7 +157,9 @@ describe('getRecordsAction test', () => {
     expect(openopsCommonMock.getRows).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getRows).toHaveBeenCalledWith({
       tableId: 123,
-      token: 'some databaseToken',
+      tokenOrContext: expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
       filters: [
         {
           fieldName: 'field name',
@@ -279,7 +293,9 @@ describe('getRecordsAction test', () => {
       expect(openopsCommonMock.getRows).toHaveBeenCalledTimes(1);
       expect(openopsCommonMock.getRows).toHaveBeenCalledWith({
         tableId: 123,
-        token: 'some databaseToken',
+        tokenOrContext: expect.objectContaining({
+          getToken: expect.any(Function),
+        }),
         filters: [
           {
             fieldName: 'a',
@@ -305,12 +321,16 @@ describe('getRecordsAction test', () => {
 });
 
 function validateWrapperCall(context: any) {
+  const expectedServerContext = {
+    tablesDatabaseId: context.server.tablesDatabaseId,
+    tablesDatabaseToken: context.server.tablesDatabaseToken,
+  };
   expect(cacheWrapperMock.getOrAdd).toHaveBeenCalledTimes(1);
   expect(cacheWrapperMock.getOrAdd).toHaveBeenNthCalledWith(
     1,
     `${context.run.id}-table-${context.propsValue.tableName}`,
     getTableIdByTableName,
-    [context.propsValue.tableName],
+    [context.propsValue.tableName, expectedServerContext],
   );
 }
 
@@ -328,6 +348,10 @@ function createContext(params?: ContextParams) {
       filterType: params?.filterType,
       filters: { filters: params?.filters || [] },
     },
+    server: {
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'token',
+    },
     run: {
       id: nanoid(),
     },
diff --git a/packages/blocks/openops-tables/test/actions/get-table-url-action.test.ts b/packages/blocks/openops-tables/test/actions/get-table-url-action.test.ts
index c17faf06e..a09321f12 100644
--- a/packages/blocks/openops-tables/test/actions/get-table-url-action.test.ts
+++ b/packages/blocks/openops-tables/test/actions/get-table-url-action.test.ts
@@ -15,6 +15,10 @@ jest.mock('@openops/server-shared', () => ({
 const openopsCommonMock = {
   ...jest.requireActual('@openops/common'),
   getTableIdByTableName: jest.fn().mockReturnValue(1),
+  getTablesServerContext: jest.fn((server) => ({
+    tablesDatabaseId: server?.tablesDatabaseId,
+    tablesDatabaseToken: server?.tablesDatabaseToken,
+  })),
   openopsTablesDropdownProperty: jest.fn().mockReturnValue({
     required: true,
     defaultValue: false,
@@ -50,6 +54,10 @@ describe('getTableUrlAction', () => {
       propsValue: {
         tableName: 'my table',
       },
+      server: {
+        tablesDatabaseId: 1,
+        tablesDatabaseToken: 'token',
+      },
     };
 
     const result = (await getTableUrlAction.run(context)) as any;
@@ -61,6 +69,10 @@ describe('getTableUrlAction', () => {
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledWith(
       'my table',
+      {
+        tablesDatabaseId: 1,
+        tablesDatabaseToken: 'token',
+      },
     );
     expect(systemMock.getOrThrow).toHaveBeenCalledTimes(1);
     expect(systemMock.getOrThrow).toHaveBeenCalledWith('FRONTEND_URL');
diff --git a/packages/blocks/openops-tables/test/actions/update-record-action.test.ts b/packages/blocks/openops-tables/test/actions/update-record-action.test.ts
index 46fe76129..04e46c63b 100644
--- a/packages/blocks/openops-tables/test/actions/update-record-action.test.ts
+++ b/packages/blocks/openops-tables/test/actions/update-record-action.test.ts
@@ -14,6 +14,15 @@ const openopsCommonMock = {
   authenticateDefaultUserInOpenOpsTables: jest.fn(),
   getPrimaryKeyFieldFromFields: jest.fn(),
   getTableFields: jest.fn().mockResolvedValue([{}]),
+  getTablesServerContext: jest.fn((server) => ({
+    tablesDatabaseId: server?.tablesDatabaseId,
+    tablesDatabaseToken: server?.tablesDatabaseToken,
+  })),
+  resolveTokenProvider: jest.fn(async (serverContext) => {
+    return {
+      getToken: () => serverContext.tablesDatabaseToken,
+    };
+  }),
   openopsTablesDropdownProperty: jest.fn().mockReturnValue({
     required: true,
     defaultValue: false,
@@ -32,7 +41,9 @@ describe('updateRowAction', () => {
   beforeEach(() => {
     jest.clearAllMocks();
     openopsCommonMock.authenticateDefaultUserInOpenOpsTables.mockResolvedValue({
-      token: 'some databaseToken',
+      tokenOrContext: expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
     });
   });
 
@@ -117,12 +128,11 @@ describe('updateRowAction', () => {
 
     validateWrapperCall(context);
     expect(result).toStrictEqual('mock result');
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledTimes(1);
-    expect(
-      openopsCommonMock.authenticateDefaultUserInOpenOpsTables,
-    ).toHaveBeenCalledWith();
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledTimes(1);
+    expect(openopsCommonMock.resolveTokenProvider).toHaveBeenCalledWith({
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'token',
+    });
   });
 
   test('should invoke upsertRow operation', async () => {
@@ -153,7 +163,9 @@ describe('updateRowAction', () => {
     expect(openopsCommonMock.upsertRow).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.upsertRow).toHaveBeenCalledWith({
       tableId: 1,
-      token: 'some databaseToken',
+      tokenOrContext: expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
       fields: {
         'primary key field': 'some primary key value',
         field1: 'new value',
@@ -365,6 +377,10 @@ describe('fieldsProperties property', () => {
     expect(openopsCommonMock.getTableFields).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getTableFields).toHaveBeenCalledWith(
       'Opportunity',
+      {
+        tablesDatabaseId: 1,
+        tablesDatabaseToken: 'token',
+      },
     );
   });
 });
@@ -375,13 +391,24 @@ function validateWrapperCall(context: any) {
     1,
     `${context.run.id}-table-${context.propsValue.tableName}`,
     getTableIdByTableName,
-    [context.propsValue.tableName],
+    [
+      context.propsValue.tableName,
+      {
+        tablesDatabaseId: context.server.tablesDatabaseId,
+        tablesDatabaseToken: context.server.tablesDatabaseToken,
+      },
+    ],
   );
   expect(cacheWrapperMock.getOrAdd).toHaveBeenNthCalledWith(
     2,
     `${context.run.id}-1-fields`,
     getFields,
-    [1, 'some databaseToken'],
+    [
+      1,
+      expect.objectContaining({
+        getToken: expect.any(Function),
+      }),
+    ],
   );
 }
 
@@ -401,6 +428,10 @@ function createContext(params?: ContextParams) {
       },
       fieldsProperties: { fieldsProperties: params?.fieldsProperties },
     },
+    server: {
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'token',
+    },
     run: {
       id: nanoid(),
     },
diff --git a/packages/openops/src/index.ts b/packages/openops/src/index.ts
index 767892b69..dc479336b 100644
--- a/packages/openops/src/index.ts
+++ b/packages/openops/src/index.ts
@@ -38,6 +38,7 @@ export * from './lib/aws/pricing';
 export * from './lib/openops-analytics';
 export * from './lib/openops-tables/applications-service';
 export * from './lib/openops-tables/auth-user';
+export * from './lib/openops-tables/context-helpers';
 export * from './lib/openops-tables/fields';
 export * from './lib/openops-tables/filters';
 export * from './lib/openops-tables/openops-tables-common-properties';
diff --git a/packages/openops/src/lib/openops-tables/applications-service.ts b/packages/openops/src/lib/openops-tables/applications-service.ts
index bc623b445..0b2d60fa2 100644
--- a/packages/openops/src/lib/openops-tables/applications-service.ts
+++ b/packages/openops/src/lib/openops-tables/applications-service.ts
@@ -3,6 +3,10 @@ import { Application } from './types';
 
 export const OPENOPS_DEFAULT_DATABASE_NAME = 'OpenOps Dataset';
 
+/*
+@deprecated The tablesDatabaseId is now stored in the project.
+This function will be removed once flag ENABLE_TABLES_DATABASE_TOKEN is removed.
+*/
 export async function getDefaultDatabaseId(
   token: string,
   databaseName = OPENOPS_DEFAULT_DATABASE_NAME, // TODO: remove this when all environments are migrated
diff --git a/packages/openops/src/lib/openops-tables/context-helpers.ts b/packages/openops/src/lib/openops-tables/context-helpers.ts
new file mode 100644
index 000000000..e0562ff59
--- /dev/null
+++ b/packages/openops/src/lib/openops-tables/context-helpers.ts
@@ -0,0 +1,38 @@
+import { ServerContext } from '@openops/blocks-framework';
+import { AppSystemProp, encryptUtils, system } from '@openops/server-shared';
+import { authenticateDefaultUserInOpenOpsTables } from './auth-user';
+
+export function shouldUseDatabaseToken(): boolean {
+  return system.getBoolean(AppSystemProp.ENABLE_TABLES_DATABASE_TOKEN) ?? false;
+}
+
+export type TokenOrContext = string | { getToken: () => string };
+export type TablesServerContext = Pick<
+  ServerContext,
+  'tablesDatabaseId' | 'tablesDatabaseToken'
+>;
+
+export function getTablesServerContext(
+  serverContext: ServerContext,
+): TablesServerContext {
+  return {
+    tablesDatabaseId: serverContext.tablesDatabaseId,
+    tablesDatabaseToken: serverContext.tablesDatabaseToken,
+  };
+}
+
+export async function resolveTokenProvider(
+  serverContext: TablesServerContext,
+): Promise<TokenOrContext> {
+  if (shouldUseDatabaseToken()) {
+    return {
+      getToken: () => {
+        const { tablesDatabaseToken } = serverContext;
+        return encryptUtils.decryptString(tablesDatabaseToken);
+      },
+    };
+  }
+
+  const { token } = await authenticateDefaultUserInOpenOpsTables();
+  return token;
+}
diff --git a/packages/openops/src/lib/openops-tables/create-axios-headers.ts b/packages/openops/src/lib/openops-tables/create-axios-headers.ts
new file mode 100644
index 000000000..4c6173585
--- /dev/null
+++ b/packages/openops/src/lib/openops-tables/create-axios-headers.ts
@@ -0,0 +1,39 @@
+import { AppSystemProp, system } from '@openops/server-shared';
+import { AxiosHeaders } from 'axios';
+import { TokenOrContext } from './context-helpers';
+
+export enum AuthType {
+  JWT = 'JWT',
+  Token = 'Token',
+}
+
+function getToken(contextOrToken: TokenOrContext | string): string {
+  return typeof contextOrToken === 'string'
+    ? contextOrToken
+    : contextOrToken.getToken();
+}
+
+function getAuthPrefix(
+  useJwtOverride: boolean,
+  shouldUseDatabaseTokenConfig: boolean,
+): AuthType {
+  const useJwt = useJwtOverride || !shouldUseDatabaseTokenConfig;
+  return useJwt ? AuthType.JWT : AuthType.Token;
+}
+
+export const createAxiosHeaders = (
+  contextOrToken: TokenOrContext | string,
+): AxiosHeaders => {
+  const useJwtOverride = typeof contextOrToken === 'string';
+  const token = getToken(contextOrToken);
+
+  const shouldUseDatabaseTokenConfig =
+    system.getBoolean(AppSystemProp.ENABLE_TABLES_DATABASE_TOKEN) ?? false;
+
+  const prefix = getAuthPrefix(useJwtOverride, shouldUseDatabaseTokenConfig);
+
+  return new AxiosHeaders({
+    'Content-Type': 'application/json',
+    Authorization: `${prefix} ${token}`,
+  });
+};
diff --git a/packages/openops/src/lib/openops-tables/fields.ts b/packages/openops/src/lib/openops-tables/fields.ts
index 6a990013a..87bedd60b 100644
--- a/packages/openops/src/lib/openops-tables/fields.ts
+++ b/packages/openops/src/lib/openops-tables/fields.ts
@@ -3,21 +3,35 @@ import {
   createAxiosHeaders,
   makeOpenOpsTablesGet,
 } from '../openops-tables/requests-helpers';
+import { TokenOrContext } from './context-helpers';
+
+export async function getFields(
+  tableId: number,
+  context: TokenOrContext | string,
+  userFieldNames?: boolean,
+  axiosRetryConfig?: IAxiosRetryConfig,
+): Promise<OpenOpsField[]>;
 
 export async function getFields(
   tableId: number,
   token: string,
+  userFieldNames?: boolean,
+  axiosRetryConfig?: IAxiosRetryConfig,
+): Promise<OpenOpsField[]>;
+
+export async function getFields(
+  tableId: number,
+  contextOrToken: TokenOrContext,
   userFieldNames = true,
   axiosRetryConfig?: IAxiosRetryConfig,
 ): Promise<OpenOpsField[]> {
-  const authenticationHeader = createAxiosHeaders(token);
+  const authenticationHeader = createAxiosHeaders(contextOrToken);
   const fields = await makeOpenOpsTablesGet<any[]>(
     `api/database/fields/table/${tableId}/?user_field_names=${userFieldNames}`,
     authenticationHeader,
     axiosRetryConfig,
   );
-
-  return fields.flatMap((item) => item);
+  return fields.flat();
 }
 
 export interface OpenOpsField {
diff --git a/packages/openops/src/lib/openops-tables/openops-tables-common-properties.ts b/packages/openops/src/lib/openops-tables/openops-tables-common-properties.ts
index 2246f6515..2e1737f14 100644
--- a/packages/openops/src/lib/openops-tables/openops-tables-common-properties.ts
+++ b/packages/openops/src/lib/openops-tables/openops-tables-common-properties.ts
@@ -1,6 +1,5 @@
 import { Property, Validators } from '@openops/blocks-framework';
-import { IAxiosRetryConfig } from 'axios-retry';
-import { authenticateDefaultUserInOpenOpsTables } from './auth-user';
+import { resolveTokenProvider, TablesServerContext } from './context-helpers';
 import {
   DateOpenOpsField,
   DurationOpenOpsField,
@@ -17,8 +16,8 @@ export function openopsTablesDropdownProperty(): any {
     displayName: 'Table',
     refreshers: [],
     required: true,
-    options: async () => {
-      const tables = await getTableNames();
+    options: async (_, { server }) => {
+      const tables = await getTableNames(server);
 
       return {
         disabled: false,
@@ -35,13 +34,11 @@ export function openopsTablesDropdownProperty(): any {
 
 export async function getTableFields(
   tableName: string,
-  axiosRetryConfig?: IAxiosRetryConfig,
+  serverContext: TablesServerContext,
 ): Promise<OpenOpsField[]> {
-  const { token } = await authenticateDefaultUserInOpenOpsTables();
-
-  const tableId = await getTableIdByTableName(tableName as unknown as string);
-
-  return await getFields(tableId, token, false, axiosRetryConfig);
+  const tableId = await getTableIdByTableName(tableName, serverContext);
+  const tokenOrContext = await resolveTokenProvider(serverContext);
+  return await getFields(tableId, tokenOrContext, false);
 }
 
 // https://api.baserow.io/api/redoc/#tag/Database-table-fields/operation/get_database_table_field
diff --git a/packages/openops/src/lib/openops-tables/requests-helpers.ts b/packages/openops/src/lib/openops-tables/requests-helpers.ts
index e065a06b0..165849b3f 100644
--- a/packages/openops/src/lib/openops-tables/requests-helpers.ts
+++ b/packages/openops/src/lib/openops-tables/requests-helpers.ts
@@ -4,13 +4,7 @@ import { AxiosError, AxiosHeaders, AxiosResponse, Method } from 'axios';
 import { IAxiosRetryConfig } from 'axios-retry';
 import { StatusCodes } from 'http-status-codes';
 import { makeHttpRequest } from '../axios-wrapper';
-
-export function createAxiosHeaders(token: string): AxiosHeaders {
-  return new AxiosHeaders({
-    'Content-Type': 'application/json',
-    Authorization: `JWT ${token}`,
-  });
-}
+export { createAxiosHeaders } from './create-axios-headers';
 
 const RETRY_DELAY_MS = 1000;
 
diff --git a/packages/openops/src/lib/openops-tables/rows.ts b/packages/openops/src/lib/openops-tables/rows.ts
index 9ab582546..75436df59 100644
--- a/packages/openops/src/lib/openops-tables/rows.ts
+++ b/packages/openops/src/lib/openops-tables/rows.ts
@@ -13,6 +13,7 @@ import {
   makeOpenOpsTablesPost,
   makeOpenOpsTablesPut,
 } from '../openops-tables/requests-helpers';
+import { TokenOrContext } from './context-helpers';
 
 export interface OpenOpsRow {
   id: number;
@@ -24,25 +25,30 @@ export interface RowParams {
   token: string;
 }
 
-export interface GetRowsParams extends RowParams {
+type RowParamsWithTokenOrContext = Omit<RowParams, 'token'> & {
+  tokenOrContext: TokenOrContext;
+};
+
+export interface GetRowsParams extends RowParamsWithTokenOrContext {
   filters?: { fieldName: string; value: any; type: ViewFilterTypesEnum }[];
   filterType?: FilterType;
+  tokenOrContext: TokenOrContext;
 }
 
-export interface AddRowParams extends RowParams {
+export interface AddRowParams extends RowParamsWithTokenOrContext {
   fields: { [key: string]: any };
 }
 
-export interface UpsertRowParams extends RowParams {
+export interface UpsertRowParams extends RowParamsWithTokenOrContext {
   fields: { [key: string]: any };
 }
 
-export interface UpdateRowParams extends RowParams {
+export interface UpdateRowParams extends RowParamsWithTokenOrContext {
   fields: { [key: string]: any };
   rowId: number;
 }
 
-export interface DeleteRowParams extends RowParams {
+export interface DeleteRowParams extends RowParamsWithTokenOrContext {
   rowId: number;
 }
 
@@ -101,7 +107,7 @@ export async function getRows(getRowsParams: GetRowsParams) {
   const paramsString = params.toString();
   const baseUrl = `api/database/rows/table/${getRowsParams.tableId}/`;
   const url = paramsString ? baseUrl + `?${paramsString}` : baseUrl;
-  const authenticationHeader = createAxiosHeaders(getRowsParams.token);
+  const authenticationHeader = createAxiosHeaders(getRowsParams.tokenOrContext);
 
   return executeWithConcurrencyLimit(
     async () => {
@@ -128,7 +134,9 @@ export async function updateRow(updateRowParams: UpdateRowParams) {
 
   return executeWithConcurrencyLimit(
     async () => {
-      const authenticationHeader = createAxiosHeaders(updateRowParams.token);
+      const authenticationHeader = createAxiosHeaders(
+        updateRowParams.tokenOrContext,
+      );
       return await makeOpenOpsTablesPatch(
         url,
         updateRowParams.fields,
@@ -150,7 +158,9 @@ export async function upsertRow(upsertRowParams: UpsertRowParams) {
 
   return executeWithConcurrencyLimit(
     async () => {
-      const authenticationHeader = createAxiosHeaders(upsertRowParams.token);
+      const authenticationHeader = createAxiosHeaders(
+        upsertRowParams.tokenOrContext,
+      );
       return await makeOpenOpsTablesPut(
         url,
         upsertRowParams.fields,
@@ -172,7 +182,9 @@ export async function addRow(addRowParams: AddRowParams) {
 
   return executeWithConcurrencyLimit(
     async () => {
-      const authenticationHeader = createAxiosHeaders(addRowParams.token);
+      const authenticationHeader = createAxiosHeaders(
+        addRowParams.tokenOrContext,
+      );
       return await makeOpenOpsTablesPost(
         url,
         addRowParams.fields,
@@ -194,7 +206,9 @@ export async function deleteRow(deleteRowParams: DeleteRowParams) {
 
   return executeWithConcurrencyLimit(
     async () => {
-      const authenticationHeader = createAxiosHeaders(deleteRowParams.token);
+      const authenticationHeader = createAxiosHeaders(
+        deleteRowParams.tokenOrContext,
+      );
       return await makeOpenOpsTablesDelete(url, authenticationHeader);
     },
     (error) => {
@@ -207,7 +221,7 @@ export async function deleteRow(deleteRowParams: DeleteRowParams) {
 }
 
 export async function getRowByPrimaryKeyValue(
-  token: string,
+  tokenOrContext: TokenOrContext,
   tableId: number,
   primaryKeyFieldValue: string,
   primaryKeyFieldName: any,
@@ -215,7 +229,6 @@ export async function getRowByPrimaryKeyValue(
 ) {
   const rows = await getRows({
     tableId: tableId,
-    token: token,
     filters: [
       {
         fieldName: primaryKeyFieldName,
@@ -223,6 +236,7 @@ export async function getRowByPrimaryKeyValue(
         type: getEqualityFilterType(primaryKeyFieldType),
       },
     ],
+    tokenOrContext,
   });
 
   if (rows.length > 1) {
diff --git a/packages/openops/src/lib/openops-tables/tables.ts b/packages/openops/src/lib/openops-tables/tables.ts
index a9fb15926..1065c1c0e 100644
--- a/packages/openops/src/lib/openops-tables/tables.ts
+++ b/packages/openops/src/lib/openops-tables/tables.ts
@@ -1,26 +1,32 @@
+import { AxiosHeaders } from 'axios';
 import {
   createAxiosHeaders,
   makeOpenOpsTablesGet,
 } from '../openops-tables/requests-helpers';
-import { getDefaultDatabaseId } from './applications-service';
-import { authenticateDefaultUserInOpenOpsTables } from './auth-user';
+import { resolveTokenProvider, TablesServerContext } from './context-helpers';
+
+export interface OpenOpsTable {
+  id: number;
+  name: string;
+}
 
 async function getTables(
   token: string,
   databaseId: number,
+  authenticationHeader: AxiosHeaders,
 ): Promise<OpenOpsTable[]> {
-  const authenticationHeader = createAxiosHeaders(token);
   const getTablesResult = await makeOpenOpsTablesGet<OpenOpsTable[]>(
     `api/database/tables/database/${databaseId}/`,
     authenticationHeader,
   );
-  return getTablesResult.flatMap((item) => item);
+  return getTablesResult.flat();
 }
 
 export async function getTableIdByTableName(
   tableName: string,
+  tablesServerContext: TablesServerContext,
 ): Promise<number> {
-  const table = await getTableByName(tableName);
+  const table = await getTableByName(tableName, tablesServerContext);
 
   if (!table) {
     throw new Error(`Table '${tableName}' not found`);
@@ -31,26 +37,40 @@ export async function getTableIdByTableName(
 
 export async function getTableByName(
   tableName: string,
+  tablesServerContext: TablesServerContext,
 ): Promise<OpenOpsTable | undefined> {
-  const tables = await getAvailableTablesInOpenopsTables();
+  const tables = await getAvailableTablesInOpenopsTables(tablesServerContext);
 
   const table = tables.find((t) => t.name === tableName);
 
   return table;
 }
 
-export async function getTableNames(): Promise<string[]> {
-  const tables = await getAvailableTablesInOpenopsTables();
+export async function getTableNames(
+  tablesServerContext: TablesServerContext,
+): Promise<string[]> {
+  const tables = await getAvailableTablesInOpenopsTables(tablesServerContext);
 
   return tables.map((t) => t.name);
 }
 
-async function getAvailableTablesInOpenopsTables(): Promise<OpenOpsTable[]> {
-  const { token } = await authenticateDefaultUserInOpenOpsTables();
+async function getAvailableTablesInOpenopsTables(
+  serverContext: TablesServerContext,
+): Promise<OpenOpsTable[]> {
+  const tokenOrContext = await resolveTokenProvider(serverContext);
+
+  const tokenAndDatabaseId = {
+    token:
+      typeof tokenOrContext === 'string'
+        ? tokenOrContext
+        : tokenOrContext.getToken(),
+    databaseId: serverContext.tablesDatabaseId,
+  };
 
-  const tablesDatabaseId = await getDefaultDatabaseId(token);
+  const authenticationHeader = createAxiosHeaders(tokenOrContext);
 
-  const tables = await getTables(token, tablesDatabaseId);
+  const { token, databaseId } = tokenAndDatabaseId;
+  const tables = await getTables(token, databaseId, authenticationHeader);
 
   return getDistinctTableNames(tables);
 }
@@ -73,8 +93,3 @@ function getDistinctTableNames(tables: OpenOpsTable[]): OpenOpsTable[] {
 
   return Array.from(tablesMap.values());
 }
-
-export interface OpenOpsTable {
-  id: number;
-  name: string;
-}
diff --git a/packages/openops/test/openops-tables/openops-tables-common-properties.test.ts b/packages/openops/test/openops-tables/openops-tables-common-properties.test.ts
index 5eaee83a3..fe4664f13 100644
--- a/packages/openops/test/openops-tables/openops-tables-common-properties.test.ts
+++ b/packages/openops/test/openops-tables/openops-tables-common-properties.test.ts
@@ -18,6 +18,16 @@ jest.mock('../../src/lib/openops-tables/auth-user', () => {
   };
 });
 
+jest.mock('@openops/server-shared', () => ({
+  ...jest.requireActual('@openops/server-shared'),
+  system: {
+    ...jest.requireActual('@openops/server-shared').system,
+    getBoolean: jest.fn().mockReturnValue(false),
+  },
+}));
+
+import { EncryptedObject } from '@openops/shared';
+import { TablesServerContext } from '../../src/lib/openops-tables/context-helpers';
 import {
   DurationOpenOpsField,
   NumberOpenOpsField,
@@ -28,6 +38,14 @@ import {
   openopsTablesDropdownProperty,
 } from '../../src/lib/openops-tables/openops-tables-common-properties';
 
+const mockTablesServerContext: TablesServerContext = {
+  tablesDatabaseId: 1,
+  tablesDatabaseToken: {
+    iv: 'test-iv',
+    data: 'test-data',
+  } as EncryptedObject,
+};
+
 describe('table property', () => {
   beforeEach(() => {
     jest.clearAllMocks();
@@ -39,7 +57,9 @@ describe('table property', () => {
     });
     getTableNamesMock.mockResolvedValue(['table1', 'table2']);
 
-    const result = await openopsTablesDropdownProperty().options();
+    const result = await openopsTablesDropdownProperty().options(undefined, {
+      server: undefined,
+    });
 
     expect(result).toMatchObject({
       disabled: false,
@@ -49,18 +69,22 @@ describe('table property', () => {
       ],
     });
     expect(getTableNamesMock).toHaveBeenCalledTimes(1);
+    expect(getTableNamesMock).toHaveBeenCalledWith(undefined);
   });
 
   test('should handle empty tables', async () => {
     getTableNamesMock.mockResolvedValue([]);
 
-    const result = await openopsTablesDropdownProperty().options();
+    const result = await openopsTablesDropdownProperty().options(undefined, {
+      server: undefined,
+    });
 
     expect(result).toMatchObject({
       disabled: false,
       options: [],
     });
     expect(getTableNamesMock).toHaveBeenCalledTimes(1);
+    expect(getTableNamesMock).toHaveBeenCalledWith(undefined);
   });
 });
 
@@ -94,7 +118,7 @@ describe('getTableFields', () => {
 
     getTableIdByTableNameMock.mockResolvedValue(1);
 
-    const result = await getTableFields('Opportunity');
+    const result = await getTableFields('Opportunity', mockTablesServerContext);
 
     expect(result).toMatchObject([
       {
@@ -116,7 +140,7 @@ describe('getTableFields', () => {
     ]);
     expect(authenticateDefaultUserInOpenOpsTablesMock).toHaveBeenCalledTimes(1);
     expect(getFieldsMock).toHaveBeenCalledTimes(1);
-    expect(getFieldsMock).toHaveBeenCalledWith(1, 'token', false, undefined); // Adjust this line as needed.
+    expect(getFieldsMock).toHaveBeenCalledWith(1, 'token', false);
   });
 
   test('should handle authentication failure', async () => {
@@ -125,9 +149,9 @@ describe('getTableFields', () => {
     );
     getTableIdByTableNameMock.mockResolvedValue(1);
 
-    await expect(getTableFields('Opportunity')).rejects.toThrow(
-      'Authentication failed',
-    );
+    await expect(
+      getTableFields('Opportunity', mockTablesServerContext),
+    ).rejects.toThrow('Authentication failed');
     expect(authenticateDefaultUserInOpenOpsTablesMock).toHaveBeenCalledTimes(1);
     expect(getFieldsMock).not.toHaveBeenCalled();
   });
@@ -139,12 +163,12 @@ describe('getTableFields', () => {
     getFieldsMock.mockResolvedValue([]);
     getTableIdByTableNameMock.mockResolvedValue(1);
 
-    const result = await getTableFields('Opportunity');
+    const result = await getTableFields('Opportunity', mockTablesServerContext);
 
     expect(result).toMatchObject([]);
     expect(authenticateDefaultUserInOpenOpsTablesMock).toHaveBeenCalledTimes(1);
     expect(getFieldsMock).toHaveBeenCalledTimes(1);
-    expect(getFieldsMock).toHaveBeenCalledWith(1, 'token', false, undefined);
+    expect(getFieldsMock).toHaveBeenCalledWith(1, 'token', false);
   });
 
   test('should return our supported properties for the field', async () => {
@@ -196,7 +220,7 @@ describe('getTableFields', () => {
     ]);
     getTableIdByTableNameMock.mockResolvedValue(2);
 
-    const result = await getTableFields('Opportunity');
+    const result = await getTableFields('Opportunity', mockTablesServerContext);
 
     expect(result).toEqual([
       numberField,
diff --git a/packages/openops/test/openops-tables/rows.test.ts b/packages/openops/test/openops-tables/rows.test.ts
index 79380745a..76187e3d6 100644
--- a/packages/openops/test/openops-tables/rows.test.ts
+++ b/packages/openops/test/openops-tables/rows.test.ts
@@ -76,7 +76,7 @@ describe('getRows', () => {
 
     const result = await getRows({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
     });
 
     expect(result).toStrictEqual([{ id: 1, order: 1234 }]);
@@ -93,7 +93,7 @@ describe('getRows', () => {
 
     const result = (await getRows({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
     })) as unknown as OpenOpsRow[];
 
     expect(result[0].id).toBe(1);
@@ -115,7 +115,7 @@ describe('getRows', () => {
 
     const result = (await getRows({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       filters: [
         {
           fieldName: 'name1',
@@ -154,7 +154,7 @@ describe('getRows', () => {
 
     const result = (await getRows({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
     })) as unknown as OpenOpsRow[];
 
     expect(result).toStrictEqual([
@@ -183,7 +183,7 @@ describe('update row', () => {
 
     const result = await updateRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       rowId: 2,
       fields: {
         'some field name one': 'value field1',
@@ -203,7 +203,7 @@ describe('update row', () => {
 
     const result = (await updateRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       rowId: 2,
       fields: {
         'some field name one': 'value field1',
@@ -235,7 +235,7 @@ describe('add row', () => {
 
     const result = await addRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       fields: {
         'some field name one': 'value field1',
         'some field name two': 2,
@@ -254,7 +254,7 @@ describe('add row', () => {
 
     const result = (await addRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       fields: {
         'some field name one': 'value field1',
         'some field name two': 2,
@@ -285,7 +285,7 @@ describe('delete row', () => {
 
     const result = await deleteRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       rowId: 2,
     });
 
@@ -301,7 +301,7 @@ describe('delete row', () => {
 
     const result = (await deleteRow({
       tableId: 1,
-      token: 'token',
+      tokenOrContext: 'token',
       rowId: 2,
     })) as any;
 
diff --git a/packages/openops/test/openops-tables/tables.test.ts b/packages/openops/test/openops-tables/tables.test.ts
index 671aec922..68b384cab 100644
--- a/packages/openops/test/openops-tables/tables.test.ts
+++ b/packages/openops/test/openops-tables/tables.test.ts
@@ -16,12 +16,30 @@ jest.mock('../../src/lib/openops-tables/applications-service', () => ({
   getDefaultDatabaseId: jest.fn().mockResolvedValue(1),
 }));
 
+jest.mock('@openops/server-shared', () => ({
+  ...jest.requireActual('@openops/server-shared'),
+  system: {
+    ...jest.requireActual('@openops/server-shared').system,
+    getBoolean: jest.fn().mockReturnValue(false),
+  },
+}));
+
+import { EncryptedObject } from '@openops/shared';
+import { TablesServerContext } from '../../src/lib/openops-tables/context-helpers';
 import {
   getTableByName,
   getTableIdByTableName,
   getTableNames,
 } from '../../src/lib/openops-tables/tables';
 
+const mockTablesServerContext: TablesServerContext = {
+  tablesDatabaseId: 1,
+  tablesDatabaseToken: {
+    iv: 'test-iv',
+    data: 'test-data',
+  } as EncryptedObject,
+};
+
 describe('get table names', () => {
   beforeEach(() => {
     jest.clearAllMocks();
@@ -37,7 +55,7 @@ describe('get table names', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableNames();
+    const result = await getTableNames(mockTablesServerContext);
 
     expect(result[0]).toBe('table name 1');
     expect(result[1]).toBe('table name 2');
@@ -60,7 +78,7 @@ describe('get table names', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableNames();
+    const result = await getTableNames(mockTablesServerContext);
 
     expect(result).toStrictEqual(['table name', 'table name2', 'table name3']);
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -83,7 +101,7 @@ describe('get table names', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableNames();
+    const result = await getTableNames(mockTablesServerContext);
 
     expect(result).toStrictEqual(['table name', 'table name3', 'Table Name']);
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -111,7 +129,10 @@ describe('get table id by table name', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableIdByTableName('table name');
+    const result = await getTableIdByTableName(
+      'table name',
+      mockTablesServerContext,
+    );
 
     expect(result).toBe(1);
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -127,9 +148,9 @@ describe('get table id by table name', () => {
     makeOpenOpsTablesGetMock.mockResolvedValue([{ id: 1, name: 'table name' }]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    await expect(getTableIdByTableName('table name 2')).rejects.toThrow(
-      "Table 'table name 2' not found",
-    );
+    await expect(
+      getTableIdByTableName('table name 2', mockTablesServerContext),
+    ).rejects.toThrow("Table 'table name 2' not found");
 
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
     expect(makeOpenOpsTablesGetMock).toHaveBeenCalledWith(
@@ -148,7 +169,10 @@ describe('get table id by table name', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableIdByTableName('table name');
+    const result = await getTableIdByTableName(
+      'table name',
+      mockTablesServerContext,
+    );
 
     expect(result).toBe(1);
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -176,7 +200,7 @@ describe('get table by table name', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableByName('table name');
+    const result = await getTableByName('table name', mockTablesServerContext);
 
     expect(result).toStrictEqual({ id: 1, name: 'table name' });
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -192,7 +216,7 @@ describe('get table by table name', () => {
     makeOpenOpsTablesGetMock.mockResolvedValue([{ id: 1, name: 'table name' }]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableByName('table name1');
+    const result = await getTableByName('table name1', mockTablesServerContext);
 
     expect(result).toBe(undefined);
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
@@ -212,7 +236,7 @@ describe('get table by table name', () => {
     ]);
     createAxiosHeadersMock.mockReturnValue('some header');
 
-    const result = await getTableByName('table name');
+    const result = await getTableByName('table name', mockTablesServerContext);
 
     expect(result).toStrictEqual({ id: 1, name: 'table name' });
     expect(makeOpenOpsTablesGetMock).toBeCalledTimes(1);
diff --git a/packages/server/api/src/app/ai/mcp/llm-query-router.ts b/packages/server/api/src/app/ai/mcp/llm-query-router.ts
index 81a678df1..068ba5877 100644
--- a/packages/server/api/src/app/ai/mcp/llm-query-router.ts
+++ b/packages/server/api/src/app/ai/mcp/llm-query-router.ts
@@ -3,6 +3,7 @@ import { logger } from '@openops/server-shared';
 import { AiConfigParsed, ChatFlowContext } from '@openops/shared';
 import { generateObject, LanguageModel, ModelMessage, ToolSet } from 'ai';
 import { z } from 'zod';
+import { projectService } from '../../project/project-service';
 import { getChatTools } from '../chat/ai-chat.service';
 import { buildUIContextSection } from '../chat/prompts.service';
 import { getAdditionalQueryClassificationDescriptions } from './extensions';
@@ -107,7 +108,7 @@ export async function routeQuery({
   }));
 
   try {
-    const openopsTablesNames = await getOpenOpsTablesNames();
+    const openopsTablesNames = await getOpenOpsTablesNames(projectId);
 
     const { object: selectionResult } = await generateObject({
       model: languageModel,
@@ -178,9 +179,14 @@ const getPreviousToolsForChat = async (
   }
 };
 
-const getOpenOpsTablesNames = async (): Promise<string[]> => {
+const getOpenOpsTablesNames = async (projectId: string): Promise<string[]> => {
   try {
-    return await getTableNames();
+    const project = await projectService.getOneOrThrow(projectId);
+    const parsedProjectId = Number.parseInt(projectId);
+    return await getTableNames({
+      tablesDatabaseId: parsedProjectId,
+      tablesDatabaseToken: project.tablesDatabaseToken,
+    });
   } catch (error) {
     logger.error('Error getting OpenOps table names for the LLM query router', {
       error,
diff --git a/packages/server/api/src/app/database/get-default-user-db-token.ts b/packages/server/api/src/app/database/get-default-user-db-token.ts
new file mode 100644
index 000000000..13006075f
--- /dev/null
+++ b/packages/server/api/src/app/database/get-default-user-db-token.ts
@@ -0,0 +1,22 @@
+import { TablesServerContext } from '@openops/common';
+import { AppSystemProp, system } from '@openops/server-shared';
+import { projectService } from '../project/project-service';
+import { userService } from '../user/user-service';
+
+export const getDefaultUserDbToken = async (): Promise<TablesServerContext> => {
+  const defaultUserEmail = system.getOrThrow(AppSystemProp.OPENOPS_ADMIN_EMAIL);
+
+  const defaultUser = await userService.getUserByEmail(defaultUserEmail);
+  if (!defaultUser) {
+    throw new Error('Default user not found');
+  }
+
+  const project = await projectService.getOneForUser(defaultUser);
+  if (!project) {
+    throw new Error('Project not found');
+  }
+  return {
+    tablesDatabaseId: project.tablesDatabaseId,
+    tablesDatabaseToken: project.tablesDatabaseToken,
+  };
+};
diff --git a/packages/server/api/src/app/database/migrations/1741945618000-ReplaceSelectOptionsIdsWithNames.ts b/packages/server/api/src/app/database/migrations/1741945618000-ReplaceSelectOptionsIdsWithNames.ts
index 885c6b797..0fd1ee283 100644
--- a/packages/server/api/src/app/database/migrations/1741945618000-ReplaceSelectOptionsIdsWithNames.ts
+++ b/packages/server/api/src/app/database/migrations/1741945618000-ReplaceSelectOptionsIdsWithNames.ts
@@ -1,6 +1,10 @@
 /* eslint-disable @typescript-eslint/no-explicit-any */
-import { getTableFields, SelectOpenOpsField } from '@openops/common';
-import { logger } from '@openops/server-shared';
+import {
+  getTableFields,
+  SelectOpenOpsField,
+  TablesServerContext,
+} from '@openops/common';
+import { AppSystemProp, logger, system } from '@openops/server-shared';
 import { MigrationInterface, QueryRunner } from 'typeorm';
 
 const mappingOfSelectOptionsIdToValuesInEveryTable = new Map<
@@ -21,8 +25,31 @@ export class ReplaceSelectOptionsIdsWithNames1741945618000
       ['0.1.8'],
     );
 
-    await updateRecords(queryRunner, workflows, 'flow_version');
-    await updateRecords(queryRunner, templates, 'flow_template');
+    const user = await queryRunner.query(
+      `SELECT * FROM "user" WHERE "email" = $1`,
+      [system.getOrThrow(AppSystemProp.OPENOPS_ADMIN_EMAIL)],
+    );
+    const project = await queryRunner.query(
+      `SELECT * FROM "project" WHERE "ownerId" = $1`,
+      [user.id],
+    );
+    const tablesServerContext: TablesServerContext = {
+      tablesDatabaseId: project.tablesDatabaseId,
+      tablesDatabaseToken: project.tablesDatabaseToken,
+    };
+
+    await updateRecords(
+      queryRunner,
+      workflows,
+      'flow_version',
+      tablesServerContext,
+    );
+    await updateRecords(
+      queryRunner,
+      templates,
+      'flow_template',
+      tablesServerContext,
+    );
   }
 
   public async down(queryRunner: QueryRunner): Promise<void> {
@@ -34,9 +61,13 @@ async function updateRecords(
   queryRunner: QueryRunner,
   records: { id: string; trigger?: any; template?: any }[],
   tableName: string,
+  tablesServerContext: TablesServerContext,
 ) {
   for (const record of records) {
-    const jsonData = await updateJsonObject(record.trigger ?? record.template);
+    const jsonData = await updateJsonObject(
+      record.trigger ?? record.template,
+      tablesServerContext,
+    );
 
     await queryRunner.query(
       `UPDATE "${tableName}" SET "${
@@ -47,7 +78,10 @@ async function updateRecords(
   }
 }
 
-const getFieldsFromCache = async (tableName: string) => {
+const getFieldsFromCache = async (
+  tableName: string,
+  tablesServerContext: TablesServerContext,
+) => {
   if (mappingOfSelectOptionsIdToValuesInEveryTable.has(tableName)) {
     const cachedFields =
       mappingOfSelectOptionsIdToValuesInEveryTable.get(tableName);
@@ -56,8 +90,12 @@ const getFieldsFromCache = async (tableName: string) => {
   }
 
   let fields: SelectOpenOpsField[] = [];
+
   try {
-    fields = (await getTableFields(tableName)) as SelectOpenOpsField[];
+    fields = (await getTableFields(
+      tableName,
+      tablesServerContext,
+    )) as SelectOpenOpsField[];
   } catch (e) {
     logger.error(`Failed to get fields for table ${tableName}`, e);
   }
@@ -79,36 +117,59 @@ const getFieldsFromCache = async (tableName: string) => {
   return fieldMaps;
 };
 
-async function updateJsonObject(obj: any): Promise<any> {
-  if (!obj || typeof obj !== 'object') return obj;
+async function updateJsonObject(
+  obj: any,
+  tablesServerContext: TablesServerContext,
+): Promise<any> {
+  if (!obj || typeof obj !== 'object') {
+    return obj;
+  }
 
-  if (obj.input?.tableName) {
-    const fields = await getFieldsFromCache(obj.input.tableName);
+  await updateInputFields(obj, tablesServerContext);
+  await processObjectKeys(obj, tablesServerContext);
 
-    if (!fields) {
-      return obj;
-    }
+  return obj;
+}
 
-    if (obj.input.fieldsProperties?.fieldsProperties) {
-      for (const field of obj.input.fieldsProperties.fieldsProperties) {
-        if (!field.fieldName) {
-          continue;
-        }
+async function updateInputFields(
+  obj: any,
+  tablesServerContext: TablesServerContext,
+): Promise<void> {
+  if (!obj.input?.tableName) {
+    return;
+  }
+
+  const fields = await getFieldsFromCache(
+    obj.input.tableName,
+    tablesServerContext,
+  );
+
+  if (!fields || !obj.input.fieldsProperties?.fieldsProperties) {
+    return;
+  }
 
-        updateFieldValue(field, fields.get(field.fieldName));
-      }
+  for (const field of obj.input.fieldsProperties.fieldsProperties) {
+    if (field.fieldName) {
+      updateFieldValue(field, fields.get(field.fieldName));
     }
   }
+}
 
+async function processObjectKeys(
+  obj: any,
+  tablesServerContext: TablesServerContext,
+): Promise<void> {
   for (const key of Object.keys(obj)) {
     if (Array.isArray(obj[key])) {
-      obj[key] = await Promise.all(obj[key].map(updateJsonObject));
-    } else if (typeof obj[key] === 'object') {
-      obj[key] = await updateJsonObject(obj[key]);
+      obj[key] = await Promise.all(
+        obj[key].map((item: any) =>
+          updateJsonObject(item, tablesServerContext),
+        ),
+      );
+    } else if (typeof obj[key] === 'object' && obj[key] !== null) {
+      obj[key] = await updateJsonObject(obj[key], tablesServerContext);
     }
   }
-
-  return obj;
 }
 
 function updateFieldValue(field: any, fieldMap?: Map<number, string>) {
diff --git a/packages/server/api/src/app/database/seeds/auto-instances-shutdown-table-seed.ts b/packages/server/api/src/app/database/seeds/auto-instances-shutdown-table-seed.ts
index 44641e2ec..fcca45cac 100644
--- a/packages/server/api/src/app/database/seeds/auto-instances-shutdown-table-seed.ts
+++ b/packages/server/api/src/app/database/seeds/auto-instances-shutdown-table-seed.ts
@@ -4,6 +4,7 @@ import { FlagEntity } from '../../flags/flag.entity';
 import { SEED_OPENOPS_AUTO_INSTANCES_SHUTDOWN_TABLE_NAME } from '../../openops-tables/template-tables/create-auto-instances-shutdown-table';
 import { seedTemplateTablesService } from '../../openops-tables/template-tables/seed-tables-for-templates';
 import { databaseConnection } from '../database-connection';
+import { getDefaultUserDbToken } from '../get-default-user-db-token';
 
 const AUTO_INSTANCES_SHUTDOWN_TABLE_SEED = 'AUTOINSTANCESSHUTDOWN';
 
@@ -34,6 +35,7 @@ export const seedAutoInstancesShutdownTable = async (): Promise<void> => {
 
   const table = await getTableByName(
     SEED_OPENOPS_AUTO_INSTANCES_SHUTDOWN_TABLE_NAME,
+    await getDefaultUserDbToken(),
   );
 
   if (!table) {
diff --git a/packages/server/api/src/app/database/seeds/openops-aggregated-costs-seed.ts b/packages/server/api/src/app/database/seeds/openops-aggregated-costs-seed.ts
index b5d4c8e26..6eae931ef 100644
--- a/packages/server/api/src/app/database/seeds/openops-aggregated-costs-seed.ts
+++ b/packages/server/api/src/app/database/seeds/openops-aggregated-costs-seed.ts
@@ -4,6 +4,7 @@ import { FlagEntity } from '../../flags/flag.entity';
 import { SEED_TABLE_NAME } from '../../openops-tables/template-tables/create-aggregated-costs-table';
 import { seedTemplateTablesService } from '../../openops-tables/template-tables/seed-tables-for-templates';
 import { databaseConnection } from '../database-connection';
+import { getDefaultUserDbToken } from '../get-default-user-db-token';
 
 const AGGREGATED_TABLE_SEED = 'AGGREGATEDCOSTS';
 
@@ -31,7 +32,10 @@ export const seedFocusDataAggregationTemplateTable =
       return;
     }
 
-    const table = await getTableByName(SEED_TABLE_NAME);
+    const table = await getTableByName(
+      SEED_TABLE_NAME,
+      await getDefaultUserDbToken(),
+    );
 
     if (!table) {
       await seedTemplateTablesService.createAggregatedCostsTable();
diff --git a/packages/server/api/src/app/database/seeds/openops-delete-old-opportunities-table.ts b/packages/server/api/src/app/database/seeds/openops-delete-old-opportunities-table.ts
index e4dcea466..9bb1d00ea 100644
--- a/packages/server/api/src/app/database/seeds/openops-delete-old-opportunities-table.ts
+++ b/packages/server/api/src/app/database/seeds/openops-delete-old-opportunities-table.ts
@@ -10,6 +10,7 @@ import { logger } from '@openops/server-shared';
 import { FlagEntity } from '../../flags/flag.entity';
 import { SEED_OPENOPS_TABLE_NAME } from '../../openops-tables/template-tables/create-opportunities-table';
 import { databaseConnection } from '../database-connection';
+import { getDefaultUserDbToken } from '../get-default-user-db-token';
 
 const OPENOPS_OLD_OPPORTUNITIES_TABLE_DELETED = 'OPPORTUNITYDEL1';
 
@@ -54,7 +55,10 @@ export const deleteOldOpportunitiesTable = async (): Promise<void> => {
   try {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
 
-    const table = await getTableByName(SEED_OPENOPS_TABLE_NAME);
+    const table = await getTableByName(
+      SEED_OPENOPS_TABLE_NAME,
+      await getDefaultUserDbToken(),
+    );
     if (!table) {
       logger.info('Skip: OpenOps deletion of old opportunities table', {
         name: 'deleteOldOpportunitiesTable',
diff --git a/packages/server/api/src/app/database/seeds/openops-knonw-cost-types-by-application-seed.ts b/packages/server/api/src/app/database/seeds/openops-knonw-cost-types-by-application-seed.ts
index 6d4fcea1d..76bcf4964 100644
--- a/packages/server/api/src/app/database/seeds/openops-knonw-cost-types-by-application-seed.ts
+++ b/packages/server/api/src/app/database/seeds/openops-knonw-cost-types-by-application-seed.ts
@@ -4,6 +4,7 @@ import { FlagEntity } from '../../flags/flag.entity';
 import { SEED_OPENOPS_KNOWN_COST_TYPES_BY_APPLICATION_TABLE_NAME } from '../../openops-tables/template-tables/create-known-cost-types-by-application-table';
 import { seedTemplateTablesService } from '../../openops-tables/template-tables/seed-tables-for-templates';
 import { databaseConnection } from '../database-connection';
+import { getDefaultUserDbToken } from '../get-default-user-db-token';
 
 const KNOWN_COST_TYPES_BY_APPLICATION = 'KNOWNCOSTTYPES';
 
@@ -34,6 +35,7 @@ export const seedKnownCostTypesByApplicationTable = async (): Promise<void> => {
 
   const table = await getTableByName(
     SEED_OPENOPS_KNOWN_COST_TYPES_BY_APPLICATION_TABLE_NAME,
+    await getDefaultUserDbToken(),
   );
 
   if (!table) {
diff --git a/packages/server/api/src/app/database/seeds/openops-opportunities-table-seed.ts b/packages/server/api/src/app/database/seeds/openops-opportunities-table-seed.ts
index cc7c00327..b9af1b27d 100644
--- a/packages/server/api/src/app/database/seeds/openops-opportunities-table-seed.ts
+++ b/packages/server/api/src/app/database/seeds/openops-opportunities-table-seed.ts
@@ -4,6 +4,7 @@ import { FlagEntity } from '../../flags/flag.entity';
 import { SEED_OPENOPS_TABLE_NAME } from '../../openops-tables/template-tables/create-opportunities-table';
 import { seedTemplateTablesService } from '../../openops-tables/template-tables/seed-tables-for-templates';
 import { databaseConnection } from '../database-connection';
+import { getDefaultUserDbToken } from '../get-default-user-db-token';
 
 const OPPORTUNITIES_TABLE_SEED = 'OPPORTUNITIESSEED';
 
@@ -32,7 +33,10 @@ export const seedOpportunitesTemplateTable = async (): Promise<void> => {
     return;
   }
 
-  const table = await getTableByName(SEED_OPENOPS_TABLE_NAME);
+  const table = await getTableByName(
+    SEED_OPENOPS_TABLE_NAME,
+    await getDefaultUserDbToken(),
+  );
 
   if (!table) {
     await seedTemplateTablesService.createOpportunityTemplateTable();
diff --git a/packages/server/api/src/app/openops-analytics/analytics-seeding-service.ts b/packages/server/api/src/app/openops-analytics/analytics-seeding-service.ts
index dd646119e..ecd49cc4f 100644
--- a/packages/server/api/src/app/openops-analytics/analytics-seeding-service.ts
+++ b/packages/server/api/src/app/openops-analytics/analytics-seeding-service.ts
@@ -3,6 +3,7 @@ import {
   getTableIdByTableName,
 } from '@openops/common';
 import { AppSystemProp, logger, system } from '@openops/server-shared';
+import { getDefaultUserDbToken } from '../database/get-default-user-db-token';
 import { SEED_OPENOPS_TABLE_NAME } from '../openops-tables/template-tables/create-opportunities-table';
 import { getOrCreatePostgresDatabaseConnection } from './create-database-connection';
 import { getOrCreateDataset } from './create-dataset';
@@ -40,7 +41,10 @@ export async function seedAnalyticsDashboards(): Promise<void> {
 
   let seedTableId: number | undefined;
   try {
-    seedTableId = await getTableIdByTableName(SEED_OPENOPS_TABLE_NAME);
+    seedTableId = await getTableIdByTableName(
+      SEED_OPENOPS_TABLE_NAME,
+      await getDefaultUserDbToken(),
+    );
   } catch (error) {
     logger.error(`Could not find table with name: ${SEED_OPENOPS_TABLE_NAME}`, {
       tableName: SEED_OPENOPS_TABLE_NAME,
diff --git a/packages/server/api/src/app/openops-tables/template-tables/seed-tables-for-templates.ts b/packages/server/api/src/app/openops-tables/template-tables/seed-tables-for-templates.ts
index 2792e4d55..9ddb616c7 100644
--- a/packages/server/api/src/app/openops-tables/template-tables/seed-tables-for-templates.ts
+++ b/packages/server/api/src/app/openops-tables/template-tables/seed-tables-for-templates.ts
@@ -1,8 +1,7 @@
-import {
-  authenticateDefaultUserInOpenOpsTables,
-  getDefaultDatabaseId,
-} from '@openops/common';
-import { logger } from '@openops/server-shared';
+import { authenticateDefaultUserInOpenOpsTables } from '@openops/common';
+import { AppSystemProp, logger, system } from '@openops/server-shared';
+import { projectService } from '../../project/project-service';
+import { userService } from '../../user/user-service';
 import { createAggregatedCostsTable } from './create-aggregated-costs-table';
 import { createAutoInstancesShutdownTable } from './create-auto-instances-shutdown-table';
 import { createBusinessUnitsTable } from './create-business-units-table';
@@ -12,10 +11,30 @@ import { createOpportunitiesTable } from './create-opportunities-table';
 import { createResourceBuTagAssignmentTable } from './create-resource-bu-tag-assignment-table';
 import { createTagOwnerMappingTable } from './create-tag-owner-mapping-table';
 
+const getProjectTablesDatabaseId = async (): Promise<number> => {
+  const email = system.getOrThrow(AppSystemProp.OPENOPS_ADMIN_EMAIL);
+  const user = await userService.getByOrganizationAndEmail({
+    organizationId: null,
+    email,
+  });
+
+  if (!user) {
+    throw new Error(`Admin user not found for email: ${email}`);
+  }
+
+  const project = await projectService.getOneForUser(user);
+
+  if (!project) {
+    throw new Error(`No project found for user: ${email}`);
+  }
+
+  return project.tablesDatabaseId;
+};
+
 export const seedTemplateTablesService = {
-  async createBaseTemplateTables() {
+  async createBaseTemplateTables(): Promise<void> {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
-    const databaseId = await getDefaultDatabaseId(token);
+    const databaseId = await getProjectTablesDatabaseId();
 
     const buTable = await createBusinessUnitsTable(databaseId, token);
     await createTagOwnerMappingTable(databaseId, token, buTable.tableId);
@@ -29,25 +48,25 @@ export const seedTemplateTablesService = {
     logger.info('[Seeding template tables] Done');
   },
 
-  async createOpportunityTemplateTable() {
+  async createOpportunityTemplateTable(): Promise<void> {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
-    const databaseId = await getDefaultDatabaseId(token);
+    const databaseId = await getProjectTablesDatabaseId();
 
     await createOpportunitiesTable(token, databaseId);
 
     logger.info('[Seeding opportunity template table] Done');
   },
 
-  async createAggregatedCostsTable() {
+  async createAggregatedCostsTable(): Promise<void> {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
-    const databaseId = await getDefaultDatabaseId(token);
+    const databaseId = await getProjectTablesDatabaseId();
 
     await createAggregatedCostsTable(databaseId, token);
   },
 
-  async createKnownCostTypesByApplicationTable() {
+  async createKnownCostTypesByApplicationTable(): Promise<void> {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
-    const databaseId = await getDefaultDatabaseId(token);
+    const databaseId = await getProjectTablesDatabaseId();
 
     await createKnownCostTypesByApplicationTable(token, databaseId);
 
@@ -56,7 +75,7 @@ export const seedTemplateTablesService = {
 
   async createAutoInstancesShutdownTable(): Promise<void> {
     const { token } = await authenticateDefaultUserInOpenOpsTables();
-    const databaseId = await getDefaultDatabaseId(token);
+    const databaseId = await getProjectTablesDatabaseId();
 
     await createAutoInstancesShutdownTable(token, databaseId);
 
diff --git a/packages/server/api/test/unit/mcp/llm-query-router.test.ts b/packages/server/api/test/unit/mcp/llm-query-router.test.ts
index a14699b37..6a9f8d230 100644
--- a/packages/server/api/test/unit/mcp/llm-query-router.test.ts
+++ b/packages/server/api/test/unit/mcp/llm-query-router.test.ts
@@ -23,6 +23,9 @@ jest.mock('ai', () => ({
 jest.mock('@openops/common', () => ({
   isLLMTelemetryEnabled: jest.fn().mockReturnValue(false),
   getTableNames: jest.fn().mockResolvedValue(['table1', 'table2', 'table3']),
+  getDatabaseTableNames: jest
+    .fn()
+    .mockResolvedValue(['table1', 'table2', 'table3']),
 }));
 
 jest.mock('@openops/server-shared', () => ({
@@ -34,12 +37,25 @@ jest.mock('@openops/server-shared', () => ({
     get: jest.fn().mockReturnValue('mock-value'),
     getBoolean: jest.fn().mockReturnValue(false),
   },
+  AppSystemProp: {
+    DB_TYPE: 'DB_TYPE',
+    ENABLE_TABLES_DATABASE_TOKEN: 'ENABLE_TABLES_DATABASE_TOKEN',
+  },
 }));
 
 jest.mock('../../../src/app/ai/chat/ai-chat.service', () => ({
   getChatTools: jest.fn(),
 }));
 
+jest.mock('../../../src/app/project/project-service', () => ({
+  projectService: {
+    getOneOrThrow: jest.fn().mockResolvedValue({
+      tablesDatabaseId: 1,
+      tablesDatabaseToken: 'mock-encrypted-token',
+    }),
+  },
+}));
+
 const getChatToolsMock = getChatTools as jest.Mock;
 
 describe('selectToolsAndQuery', () => {
diff --git a/packages/server/api/test/unit/openops-analytics/analytics-seeding-service.test.ts b/packages/server/api/test/unit/openops-analytics/analytics-seeding-service.test.ts
index a4f3f87a1..754209f5e 100644
--- a/packages/server/api/test/unit/openops-analytics/analytics-seeding-service.test.ts
+++ b/packages/server/api/test/unit/openops-analytics/analytics-seeding-service.test.ts
@@ -52,12 +52,32 @@ jest.mock('../../../src/app/openops-analytics/populate-homepage', () => {
   };
 });
 
+const getDefaultUserDbTokenMock = jest.fn();
+jest.mock('../../../src/app/database/get-default-user-db-token', () => ({
+  getDefaultUserDbToken: jest.fn(),
+}));
+
+import { TablesServerContext } from '@openops/common';
+import { EncryptedObject } from '@openops/shared';
+import { getDefaultUserDbToken } from '../../../src/app/database/get-default-user-db-token';
 import { seedAnalyticsDashboards } from '../../../src/app/openops-analytics/analytics-seeding-service';
 import { SEED_OPENOPS_TABLE_NAME } from '../../../src/app/openops-tables/template-tables/create-opportunities-table';
 
+const mockTablesServerContext: TablesServerContext = {
+  tablesDatabaseId: 1,
+  tablesDatabaseToken: {
+    iv: 'test-iv',
+    data: 'test-data',
+  } as EncryptedObject,
+};
+
 describe('seedAnalyticsDashboards', () => {
   beforeEach(() => {
-    jest.clearAllMocks(), (process.env.OPS_POSTGRES_PASSWORD = 'some password');
+    jest.clearAllMocks();
+    (getDefaultUserDbToken as jest.Mock).mockImplementation(
+      getDefaultUserDbTokenMock,
+    );
+    process.env.OPS_POSTGRES_PASSWORD = 'some password';
     process.env.OPS_POSTGRES_PORT = 'some port';
     process.env.OPS_POSTGRES_USERNAME = 'some username';
     process.env.OPS_POSTGRES_HOST = 'some host';
@@ -66,6 +86,7 @@ describe('seedAnalyticsDashboards', () => {
   });
 
   it('should succesfully create seed related objects', async () => {
+    getDefaultUserDbTokenMock.mockResolvedValue(mockTablesServerContext);
     openopsCommonMock.getTableIdByTableName.mockResolvedValue(1);
     openopsCommonMock.authenticateOpenOpsAnalyticsAdmin.mockResolvedValue({
       access_token: 'some token',
@@ -118,10 +139,12 @@ describe('seedAnalyticsDashboards', () => {
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledWith(
       'Opportunities',
+      mockTablesServerContext,
     );
   });
 
   it('should not create dataset and log error if table with seed name was not found.', async () => {
+    getDefaultUserDbTokenMock.mockResolvedValue(mockTablesServerContext);
     openopsCommonMock.getTableIdByTableName.mockRejectedValueOnce(
       new Error('Table not found'),
     );
@@ -143,10 +166,12 @@ describe('seedAnalyticsDashboards', () => {
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledTimes(1);
     expect(openopsCommonMock.getTableIdByTableName).toHaveBeenCalledWith(
       'Opportunities',
+      mockTablesServerContext,
     );
   });
 
   it('should user alternative host name if provided', async () => {
+    getDefaultUserDbTokenMock.mockResolvedValue(mockTablesServerContext);
     openopsCommonMock.getTableIdByTableName.mockResolvedValue(1);
     process.env.OPS_OPENOPS_TABLES_DB_HOST = 'alternative host';
     openopsCommonMock.authenticateOpenOpsAnalyticsAdmin.mockResolvedValue({
diff --git a/packages/server/shared/src/lib/system/system-prop.ts b/packages/server/shared/src/lib/system/system-prop.ts
index e23fe6a1a..071ac2fa4 100644
--- a/packages/server/shared/src/lib/system/system-prop.ts
+++ b/packages/server/shared/src/lib/system/system-prop.ts
@@ -110,6 +110,7 @@ export enum AppSystemProp {
 
   MAX_LLM_CALLS_WITHOUT_INTERACTION = 'MAX_LLM_CALLS_WITHOUT_INTERACTION',
   LLM_CHAT_EXPIRE_TIME_SECONDS = 'LLM_CHAT_EXPIRE_TIME_SECONDS',
+  ENABLE_TABLES_DATABASE_TOKEN = 'ENABLE_TABLES_DATABASE_TOKEN',
 }
 
 export enum SharedSystemProp {
diff --git a/packages/server/shared/src/lib/system/system.ts b/packages/server/shared/src/lib/system/system.ts
index 584a9403e..ddc3cde3f 100644
--- a/packages/server/shared/src/lib/system/system.ts
+++ b/packages/server/shared/src/lib/system/system.ts
@@ -98,6 +98,7 @@ const systemPropDefaultValues: Partial<Record<SystemProp, string>> = {
   [AppSystemProp.LLM_CHAT_EXPIRE_TIME_SECONDS]: '86400', // 24 hours
   [AppSystemProp.TELEMETRY_MODE]: 'COLLECTOR',
   [AppSystemProp.TELEMETRY_COLLECTOR_URL]: 'https://telemetry.openops.com/save',
+  [AppSystemProp.ENABLE_TABLES_DATABASE_TOKEN]: 'false',
   [SharedSystemProp.ENABLE_HOST_VALIDATION]: 'true',
 };
 
