{
  "created": "1771567459412",
  "updated": "1771567459412",
  "name": "AWS Benchmark - Old generation EC2 instances",
  "tags": [],
  "services": [],
  "domains": [],
  "template": {
    "displayName": "AWS Benchmark - Old generation EC2 instances",
    "trigger": {
      "name": "trigger",
      "valid": true,
      "displayName": "Catch Webhook",
      "type": "TRIGGER",
      "settings": {
        "blockName": "@openops/block-webhook",
        "blockVersion": "~0.1.5",
        "blockType": "OFFICIAL",
        "packageType": "REGISTRY",
        "input": {
          "authType": "none",
          "markdown": null,
          "authFields": {}
        },
        "inputUiInfo": {
          "customizedInputs": {}
        },
        "triggerName": "catch_webhook"
      },
      "stepIndex": 1,
      "nextAction": {
        "id": "6Kw7KtE9bJFlq4RrPJm7d",
        "name": "step_g",
        "type": "CODE",
        "valid": true,
        "settings": {
          "input": {
            "regions_array": "{{trigger['body']['aws_regions_array']}}",
            "accounts_array": "{{trigger['body']['aws_accounts_array']}}"
          },
          "sourceCode": {
            "code": "export const code = async (inputs) => {\n  const regions = (typeof inputs.regions_array === 'string' \n    ? JSON.parse(inputs.regions_array) \n    : inputs.regions_array) as any[];\n\n  const accounts = (typeof inputs.accounts_array === 'string' \n    ? JSON.parse(inputs.accounts_array) \n    : inputs.accounts_array) as any[];\n\n  return { regions, accounts };\n};",
            "packageJson": "{\n  \"dependencies\": {}\n}"
          },
          "inputUiInfo": {
            "customizedInputs": {}
          },
          "errorHandlingOptions": {
            "retryOnFailure": {
              "value": false
            },
            "continueOnFailure": {
              "value": false
            }
          }
        },
        "nextAction": {
          "id": "YMLkxklyLsj7rrrwsLugX",
          "name": "step_26",
          "type": "BLOCK",
          "valid": true,
          "settings": {
            "input": {
              "key": "wfName",
              "store_scope": "RUN",
              "defaultValue": "AWS Benchmark - Old generation EC2 instances"
            },
            "blockName": "@openops/block-store",
            "blockType": "OFFICIAL",
            "actionName": "get",
            "inputUiInfo": {
              "customizedInputs": {
                "settings": {
                  "input": {}
                }
              }
            },
            "packageType": "REGISTRY",
            "blockVersion": "~0.5.1",
            "errorHandlingOptions": {
              "retryOnFailure": {
                "value": false
              },
              "continueOnFailure": {
                "value": false
              }
            }
          },
          "nextAction": {
            "id": "VT0cBElTnCZ4fm2Wo0wet",
            "name": "step_1",
            "type": "LOOP_ON_ITEMS",
            "valid": true,
            "settings": {
              "items": "{{step_g['accounts']}}",
              "inputUiInfo": {
                "customizedInputs": {}
              }
            },
            "nextAction": {
              "id": "wYhOoAQSqg2UXkOuIblN4",
              "name": "step_a",
              "type": "BLOCK",
              "valid": true,
              "settings": {
                "input": {
                  "auth": null,
                  "body": {
                    "data": {
                      "status": "ok"
                    }
                  },
                  "status": 200,
                  "headers": {},
                  "body_type": "json"
                },
                "blockName": "@openops/block-http",
                "blockType": "OFFICIAL",
                "actionName": "return_response",
                "inputUiInfo": {
                  "customizedInputs": {}
                },
                "packageType": "REGISTRY",
                "blockVersion": "~0.5.1",
                "errorHandlingOptions": {
                  "retryOnFailure": {
                    "value": false
                  },
                  "continueOnFailure": {
                    "value": false
                  }
                }
              },
              "displayName": "Return Response",
              "stepIndex": 22
            },
            "displayName": "ACCOUNT",
            "firstLoopAction": {
              "id": "NDgm98QXqt7CREZzeGPMa",
              "name": "step_32",
              "type": "LOOP_ON_ITEMS",
              "valid": true,
              "settings": {
                "items": "{{step_g['regions']}}",
                "inputUiInfo": {
                  "customizedInputs": {}
                }
              },
              "displayName": "REGION",
              "firstLoopAction": {
                "id": "eZ6pFzNP3UgDkfZSM878e",
                "name": "step_2",
                "type": "BLOCK",
                "valid": true,
                "settings": {
                  "input": {
                    "auth": "{{connections['AWS']}}",
                    "dryRun": false,
                    "account": {
                      "accounts": "{{step_1['item']}}"
                    },
                    "commandToRun": "aws ec2 describe-instances --region {{step_32['item']}} --filters \"Name=instance-state-name,Values=running\" --query 'Reservations[*].Instances[*].{ InstanceId: InstanceId, InstanceType: InstanceType, Architecture: Architecture, AvailabilityZone: Placement.AvailabilityZone, Tags: Tags, AccountID: NetworkInterfaces[0].OwnerId }'"
                  },
                  "blockName": "@openops/block-aws",
                  "blockType": "OFFICIAL",
                  "actionName": "aws_cli",
                  "inputUiInfo": {
                    "customizedInputs": {
                      "settings": {
                        "input": {
                          "auth": false,
                          "account": {
                            "accounts": true
                          }
                        }
                      }
                    }
                  },
                  "packageType": "REGISTRY",
                  "blockVersion": "~0.0.3",
                  "errorHandlingOptions": {
                    "retryOnFailure": {
                      "value": false
                    },
                    "continueOnFailure": {
                      "value": false
                    }
                  }
                },
                "nextAction": {
                  "id": "LHAbqJkJRFWC7dgbsm72Z",
                  "name": "step_d",
                  "type": "LOOP_ON_ITEMS",
                  "valid": true,
                  "settings": {
                    "items": "{{step_2[0]}}",
                    "inputUiInfo": {
                      "customizedInputs": {}
                    }
                  },
                  "displayName": "RESOURCE",
                  "firstLoopAction": {
                    "id": "3j132XCJpe98LLdcMlvMt",
                    "name": "step_27",
                    "type": "BLOCK",
                    "valid": true,
                    "settings": {
                      "input": {
                        "filters": {
                          "filters": [
                            {
                              "value": {
                                "value": "{{step_26}}"
                              },
                              "fieldName": "Workflow",
                              "filterType": "Is equal"
                            },
                            {
                              "value": {
                                "value": "{{step_d['item']['InstanceId']}}"
                              },
                              "fieldName": "Resource Id",
                              "filterType": "Is equal"
                            }
                          ]
                        },
                        "tableName": "Opportunities",
                        "filterType": "AND"
                      },
                      "blockName": "@openops/block-openops-tables",
                      "blockType": "OFFICIAL",
                      "actionName": "get_records",
                      "inputUiInfo": {
                        "customizedInputs": {}
                      },
                      "packageType": "REGISTRY",
                      "blockVersion": "~0.0.1",
                      "errorHandlingOptions": {
                        "retryOnFailure": {
                          "value": false
                        },
                        "continueOnFailure": {
                          "value": false
                        }
                      }
                    },
                    "nextAction": {
                      "id": "okWpniHSkhqSVTTqr2F5c",
                      "name": "step_28",
                      "type": "BRANCH",
                      "valid": true,
                      "settings": {
                        "conditions": [
                          [
                            {
                              "operator": "NUMBER_IS_EQUAL_TO",
                              "firstValue": "{{step_27['count']}}",
                              "secondValue": "0",
                              "caseSensitive": false
                            }
                          ]
                        ],
                        "inputUiInfo": {
                          "customizedInputs": {}
                        }
                      },
                      "nextAction": {
                        "id": "of1EuF6v6reZFHmOjgu7C",
                        "name": "step_b",
                        "type": "CODE",
                        "valid": true,
                        "settings": {
                          "input": {
                            "InstanceData": "{{step_d['item']}}"
                          },
                          "sourceCode": {
                            "code": "/**\n * Checks if an AWS EC2 instance is a previous generation type and recommends an upgrade\n * @param {Object} inputs - Input object containing instance data\n * @returns {Object} - Results with isPreviousGeneration flag and recommended instance type\n */\nexport const code = async (inputs) => {\n  const instanceType = inputs.InstanceData.InstanceType;\n  const architecture = inputs.InstanceData.Architecture;\n  \n  // Instance family generations map by architecture\n  // Maps family to current generation number for each architecture\n  const instanceFamilyGenerations = {\n    // General Purpose\n    't': {\n      'x86_64': 3,  // t3 is current gen for x86_64\n      'arm64': 4    // t4g is current gen for arm64\n    },\n    'm': {\n      'x86_64': 7,  // m7i is current gen for x86_64\n      'arm64': 7    // m7g is current gen for arm64\n    },\n    'a': {\n      'arm64': 1    // a1 is only available on ARM\n    },\n    'mac': {\n      'x86_64': 2   // mac2 is x86_64 only\n    },\n    \n    // Compute Optimized\n    'c': {\n      'x86_64': 7,  // c7i is current gen for x86_64\n      'arm64': 7    // c7g is current gen for arm64\n    },\n    \n    // Memory Optimized\n    'r': {\n      'x86_64': 7,  // r7i is current gen for x86_64\n      'arm64': 7    // r7g is current gen for arm64\n    },\n    'x': {\n      'x86_64': 2   // x2 is x86_64 only\n    },\n    'z': {\n      'x86_64': 1   // z1 is x86_64 only\n    },\n    \n    // Storage Optimized\n    'd': {\n      'x86_64': 3,  // d3 is current gen for x86_64\n      'arm64': 3    // d3en is available for arm64\n    },\n    'h': {\n      'x86_64': 1   // h1 is x86_64 only\n    },\n    'i': {\n      'x86_64': 4,  // i4i is current gen for x86_64\n      'arm64': 4    // i4g is current gen for arm64\n    },\n    \n    // Accelerated Computing\n    'p': {\n      'x86_64': 5   // p5 is x86_64 only\n    },\n    'g': {\n      'x86_64': 5,  // g5 is x86_64 only\n      'arm64': 5    // g5g is arm64\n    },\n    'inf': {\n      'x86_64': 2   // inf2 is x86_64 only\n    },\n    'vt': {\n      'x86_64': 1   // vt1 is x86_64 only\n    },\n    'dl': {\n      'x86_64': 1   // dl1 is x86_64 only\n    },\n    'trn': {\n      'x86_64': 1   // trn1 is x86_64 only\n    },\n    'f': {\n      'x86_64': 1   // f1 is x86_64 only\n    },\n    \n    // High Performance Computing\n    'hpc': {\n      'x86_64': 7,  // hpc7a is x86_64\n      'arm64': 7    // hpc7g is arm64\n    }\n  };\n\n  // Define base result structure\n  const result = {\n    currentInstanceType: instanceType,\n    isPreviousGeneration: false,\n    message: \"\",\n    recommendedType: null,\n  };\n\n  // Parse the instance type to extract family, generation, and size\n  const match = instanceType.match(/^([a-z]+)(\\d+)([a-z]*)\\.([a-zA-Z0-9]+)$/);\n  \n  if (!match) {\n    result.message = \"Unable to determine instance type format\";\n    return result;\n  }\n  \n  const family = match[1];\n  const generation = parseInt(match[2], 10);\n  const variant = match[3];\n  const size = match[4];\n  \n  // Check if we know about this family\n  if (!instanceFamilyGenerations[family]) {\n    result.message = \"Unknown instance family\";\n    return result;\n  }\n  \n  // Check if we have information for this architecture\n  if (!instanceFamilyGenerations[family][architecture]) {\n    result.message = \"Unknown architecture for this family\";\n    return result;\n  }\n  \n  // Check if this generation is below the current generation for this family and architecture\n  const currentGen = instanceFamilyGenerations[family][architecture];\n  result.isPreviousGeneration = generation < currentGen;\n  \n  if (result.isPreviousGeneration) {\n    result.message = `Instance is a previous generation (${generation} vs current ${currentGen})`;\n    \n    // Generate recommendation for the current generation equivalent\n    result.recommendedType = `${family}${currentGen}${variant}.${size}`;\n    \n     } else {\n    result.message = \"Instance is current generation\";\n  }\n  \n  return result;\n};",
                            "packageJson": "{}"
                          },
                          "inputUiInfo": {
                            "customizedInputs": {}
                          },
                          "errorHandlingOptions": {
                            "retryOnFailure": {
                              "value": false
                            },
                            "continueOnFailure": {
                              "value": false
                            }
                          }
                        },
                        "nextAction": {
                          "id": "SzXmEFcEHEvU33KsZOEOx",
                          "name": "step_c",
                          "type": "BRANCH",
                          "valid": true,
                          "settings": {
                            "conditions": [
                              [
                                {
                                  "operator": "TEXT_EXACTLY_MATCHES",
                                  "firstValue": "{{step_b['isPreviousGeneration']}}",
                                  "secondValue": "true",
                                  "caseSensitive": false
                                }
                              ]
                            ],
                            "inputUiInfo": {
                              "customizedInputs": {}
                            }
                          },
                          "displayName": "If previous generation",
                          "onSuccessAction": {
                            "id": "34x06NAXZGUUpYZA7hoWK",
                            "name": "step_h",
                            "type": "BLOCK",
                            "valid": true,
                            "settings": {
                              "input": {
                                "auth": "{{connections['AWS']}}",
                                "service": {
                                  "ServiceCode": "AmazonEC2",
                                  "AttributeNames": [
                                    "termType",
                                    "productFamily",
                                    "servicecode",
                                    "location",
                                    "locationType",
                                    "instanceType",
                                    "currentGeneration",
                                    "instanceFamily",
                                    "vcpu",
                                    "physicalProcessor",
                                    "clockSpeed",
                                    "memory",
                                    "storage",
                                    "networkPerformance",
                                    "processorArchitecture",
                                    "tenancy",
                                    "operatingSystem",
                                    "licenseModel",
                                    "usagetype",
                                    "operation",
                                    "availabilityzone",
                                    "capacitystatus",
                                    "classicnetworkingsupport",
                                    "dedicatedEbsThroughput",
                                    "dedicatedEbsThroughputDescription",
                                    "ecu",
                                    "enhancedNetworkingSupported",
                                    "gpuMemory",
                                    "instancesku",
                                    "intelAvxAvailable",
                                    "intelAvx2Available",
                                    "intelTurboAvailable",
                                    "marketoption",
                                    "normalizationSizeFactor",
                                    "preInstalledSw",
                                    "processorFeatures",
                                    "regionCode",
                                    "servicename",
                                    "vpcnetworkingsupport",
                                    "LeaseContractLength",
                                    "PurchaseOption",
                                    "OfferingClass",
                                    "instanceCapacity-12xlarge",
                                    "instanceCapacity-16xlarge",
                                    "instanceCapacity-24xlarge",
                                    "instanceCapacity-2xlarge",
                                    "instanceCapacity-32xlarge",
                                    "instanceCapacity-4xlarge",
                                    "instanceCapacity-8xlarge",
                                    "instanceCapacity-Large",
                                    "instanceCapacity-Xlarge",
                                    "physicalCores",
                                    "gpu",
                                    "transferType",
                                    "fromLocation",
                                    "fromLocationType",
                                    "toLocation",
                                    "toLocationType",
                                    "fromRegionCode",
                                    "toRegionCode",
                                    "ebsOptimized",
                                    "group",
                                    "groupDescription",
                                    "instanceCapacity-Metal",
                                    "storageMedia",
                                    "snapshotarchivefeetype",
                                    "instanceCapacity-Medium",
                                    "elasticGraphicsType",
                                    "instanceCapacity-18xlarge",
                                    "instanceCapacity-9xlarge",
                                    "Restriction",
                                    "resourceType",
                                    "instance",
                                    "instanceCapacity-10xlarge",
                                    "provisioned",
                                    "volumeApiName",
                                    "productType",
                                    "volumeType",
                                    "maxVolumeSize",
                                    "maxIopsvolume",
                                    "maxThroughputvolume",
                                    "maxIopsBurstPerformance"
                                  ]
                                },
                                "queryFilters": {
                                  "queryFilters": [
                                    {
                                      "attributeName": "instanceType",
                                      "attributeValue": "{{step_b['currentInstanceType']}}",
                                      "dynamicViewToggled": {
                                        "attributeValue": true
                                      }
                                    },
                                    {
                                      "attributeName": "regionCode",
                                      "attributeValue": "{{step_32['item']}}",
                                      "dynamicViewToggled": {
                                        "attributeValue": true
                                      }
                                    },
                                    {
                                      "attributeName": "operatingSystem",
                                      "attributeValue": "Linux"
                                    },
                                    {
                                      "attributeName": "tenancy",
                                      "attributeValue": "Shared"
                                    },
                                    {
                                      "attributeName": "termType",
                                      "attributeValue": "OnDemand"
                                    },
                                    {
                                      "attributeName": "preInstalledSw",
                                      "attributeValue": "NA"
                                    },
                                    {
                                      "attributeName": "capacitystatus",
                                      "attributeValue": "Used"
                                    }
                                  ]
                                }
                              },
                              "blockName": "@openops/block-aws",
                              "blockType": "OFFICIAL",
                              "actionName": "get_price",
                              "inputUiInfo": {
                                "customizedInputs": {
                                  "settings": {
                                    "input": {
                                      "auth": true
                                    }
                                  }
                                }
                              },
                              "packageType": "REGISTRY",
                              "blockVersion": "~0.0.3",
                              "errorHandlingOptions": {
                                "retryOnFailure": {
                                  "value": false
                                },
                                "continueOnFailure": {
                                  "value": false
                                }
                              }
                            },
                            "nextAction": {
                              "id": "5rTBBWtSOM8asBTi9xSnv",
                              "name": "step_i",
                              "type": "BLOCK",
                              "valid": true,
                              "settings": {
                                "input": {
                                  "auth": "{{connections['AWS']}}",
                                  "service": {
                                    "ServiceCode": "AmazonEC2",
                                    "AttributeNames": [
                                      "termType",
                                      "productFamily",
                                      "servicecode",
                                      "location",
                                      "locationType",
                                      "instanceType",
                                      "currentGeneration",
                                      "instanceFamily",
                                      "vcpu",
                                      "physicalProcessor",
                                      "clockSpeed",
                                      "memory",
                                      "storage",
                                      "networkPerformance",
                                      "processorArchitecture",
                                      "tenancy",
                                      "operatingSystem",
                                      "licenseModel",
                                      "usagetype",
                                      "operation",
                                      "availabilityzone",
                                      "capacitystatus",
                                      "classicnetworkingsupport",
                                      "dedicatedEbsThroughput",
                                      "dedicatedEbsThroughputDescription",
                                      "ecu",
                                      "enhancedNetworkingSupported",
                                      "gpuMemory",
                                      "instancesku",
                                      "intelAvxAvailable",
                                      "intelAvx2Available",
                                      "intelTurboAvailable",
                                      "marketoption",
                                      "normalizationSizeFactor",
                                      "preInstalledSw",
                                      "processorFeatures",
                                      "regionCode",
                                      "servicename",
                                      "vpcnetworkingsupport",
                                      "LeaseContractLength",
                                      "PurchaseOption",
                                      "OfferingClass",
                                      "instanceCapacity-12xlarge",
                                      "instanceCapacity-16xlarge",
                                      "instanceCapacity-24xlarge",
                                      "instanceCapacity-2xlarge",
                                      "instanceCapacity-32xlarge",
                                      "instanceCapacity-4xlarge",
                                      "instanceCapacity-8xlarge",
                                      "instanceCapacity-Large",
                                      "instanceCapacity-Xlarge",
                                      "physicalCores",
                                      "gpu",
                                      "transferType",
                                      "fromLocation",
                                      "fromLocationType",
                                      "toLocation",
                                      "toLocationType",
                                      "fromRegionCode",
                                      "toRegionCode",
                                      "ebsOptimized",
                                      "group",
                                      "groupDescription",
                                      "instanceCapacity-Metal",
                                      "storageMedia",
                                      "snapshotarchivefeetype",
                                      "instanceCapacity-Medium",
                                      "elasticGraphicsType",
                                      "instanceCapacity-18xlarge",
                                      "instanceCapacity-9xlarge",
                                      "Restriction",
                                      "resourceType",
                                      "instance",
                                      "instanceCapacity-10xlarge",
                                      "provisioned",
                                      "volumeApiName",
                                      "productType",
                                      "volumeType",
                                      "maxVolumeSize",
                                      "maxIopsvolume",
                                      "maxThroughputvolume",
                                      "maxIopsBurstPerformance"
                                    ]
                                  },
                                  "queryFilters": {
                                    "queryFilters": [
                                      {
                                        "attributeName": "instanceType",
                                        "attributeValue": "{{step_b['recommendedType']}}",
                                        "dynamicViewToggled": {
                                          "attributeValue": true
                                        }
                                      },
                                      {
                                        "attributeName": "regionCode",
                                        "attributeValue": "{{step_32['item']}}",
                                        "dynamicViewToggled": {
                                          "attributeValue": true
                                        }
                                      },
                                      {
                                        "attributeName": "operatingSystem",
                                        "attributeValue": "Linux"
                                      },
                                      {
                                        "attributeName": "tenancy",
                                        "attributeValue": "Shared"
                                      },
                                      {
                                        "attributeName": "termType",
                                        "attributeValue": "OnDemand"
                                      },
                                      {
                                        "attributeName": "preInstalledSw",
                                        "attributeValue": "NA"
                                      },
                                      {
                                        "attributeName": "capacitystatus",
                                        "attributeValue": "Used"
                                      }
                                    ]
                                  }
                                },
                                "blockName": "@openops/block-aws",
                                "blockType": "OFFICIAL",
                                "actionName": "get_price",
                                "inputUiInfo": {
                                  "customizedInputs": {}
                                },
                                "packageType": "REGISTRY",
                                "blockVersion": "~0.0.3",
                                "errorHandlingOptions": {
                                  "retryOnFailure": {
                                    "value": false
                                  },
                                  "continueOnFailure": {
                                    "value": false
                                  }
                                }
                              },
                              "nextAction": {
                                "id": "922EoEjElwv1TUcGFErkk",
                                "name": "step_f",
                                "type": "BRANCH",
                                "valid": true,
                                "settings": {
                                  "conditions": [
                                    [
                                      {
                                        "operator": "LIST_IS_EMPTY",
                                        "firstValue": "{{step_i}}",
                                        "secondValue": "",
                                        "caseSensitive": false
                                      }
                                    ]
                                  ],
                                  "inputUiInfo": {
                                    "customizedInputs": {}
                                  }
                                },
                                "nextAction": {
                                  "id": "oIfB01Fw9xfh2sPD9JjJ5",
                                  "name": "step_j",
                                  "type": "BLOCK",
                                  "valid": true,
                                  "settings": {
                                    "input": {
                                      "first_number": "{{step_i[0]['pricePerUnit']['USD']}}",
                                      "second_number": "{{step_h[0]['pricePerUnit']['USD']}}"
                                    },
                                    "blockName": "@openops/block-math-helper",
                                    "blockType": "OFFICIAL",
                                    "actionName": "subtraction_math",
                                    "inputUiInfo": {
                                      "customizedInputs": {}
                                    },
                                    "packageType": "REGISTRY",
                                    "blockVersion": "~0.0.8",
                                    "errorHandlingOptions": {
                                      "retryOnFailure": {
                                        "value": false
                                      },
                                      "continueOnFailure": {
                                        "value": false
                                      }
                                    }
                                  },
                                  "nextAction": {
                                    "id": "JE6ReCfml9fampiSc9dwD",
                                    "name": "step_k",
                                    "type": "BLOCK",
                                    "valid": true,
                                    "settings": {
                                      "input": {
                                        "first_number": "{{step_j}}",
                                        "second_number": "730"
                                      },
                                      "blockName": "@openops/block-math-helper",
                                      "blockType": "OFFICIAL",
                                      "actionName": "multiplication_math",
                                      "inputUiInfo": {
                                        "customizedInputs": {}
                                      },
                                      "packageType": "REGISTRY",
                                      "blockVersion": "~0.0.8",
                                      "errorHandlingOptions": {
                                        "retryOnFailure": {
                                          "value": false
                                        },
                                        "continueOnFailure": {
                                          "value": false
                                        }
                                      }
                                    },
                                    "nextAction": {
                                      "id": "GCASFE7gUuBzRWwltY3HO",
                                      "name": "step_l",
                                      "type": "BLOCK",
                                      "valid": true,
                                      "settings": {
                                        "input": {
                                          "number": "{{step_k}}",
                                          "numberOfDecimalPlaces": "2"
                                        },
                                        "blockName": "@openops/block-math-helper",
                                        "blockType": "OFFICIAL",
                                        "actionName": "truncate_math",
                                        "inputUiInfo": {
                                          "customizedInputs": {}
                                        },
                                        "packageType": "REGISTRY",
                                        "blockVersion": "~0.0.8",
                                        "errorHandlingOptions": {
                                          "retryOnFailure": {
                                            "value": false
                                          },
                                          "continueOnFailure": {
                                            "value": false
                                          }
                                        }
                                      },
                                      "nextAction": {
                                        "id": "IZtdaxk8kWMt6go9YGQE8",
                                        "name": "step_e",
                                        "type": "BLOCK",
                                        "valid": true,
                                        "settings": {
                                          "input": {
                                            "numbers": [
                                              "{{step_l}}",
                                              "0"
                                            ]
                                          },
                                          "blockName": "@openops/block-math-helper",
                                          "blockType": "OFFICIAL",
                                          "actionName": "max",
                                          "inputUiInfo": {
                                            "customizedInputs": {}
                                          },
                                          "packageType": "REGISTRY",
                                          "blockVersion": "~0.0.8",
                                          "errorHandlingOptions": {
                                            "retryOnFailure": {
                                              "value": false
                                            },
                                            "continueOnFailure": {
                                              "value": false
                                            }
                                          }
                                        },
                                        "nextAction": {
                                          "id": "DLPvDfv3sMs8qDtIpXYgc",
                                          "name": "step_n",
                                          "type": "BLOCK",
                                          "valid": true,
                                          "settings": {
                                            "input": {
                                              "tableName": "Opportunities",
                                              "rowPrimaryKey": {
                                                "rowPrimaryKey": null
                                              },
                                              "fieldsProperties": {
                                                "fieldsProperties": [
                                                  {
                                                    "fieldName": "Estimated savings USD per month",
                                                    "newFieldValue": {
                                                      "newFieldValue": "{{step_e}}"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Opportunity Type",
                                                    "newFieldValue": {
                                                      "newFieldValue": "Workflow optimization"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Resource Id",
                                                    "newFieldValue": {
                                                      "newFieldValue": "{{step_d['item']['InstanceId']}}"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Service",
                                                    "newFieldValue": {
                                                      "newFieldValue": "AWS EC2"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Region",
                                                    "newFieldValue": {
                                                      "newFieldValue": "{{step_32['item']}}"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Complexity",
                                                    "newFieldValue": {
                                                      "newFieldValue": "M"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Risk",
                                                    "newFieldValue": {
                                                      "newFieldValue": "Medium"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Account",
                                                    "newFieldValue": {
                                                      "newFieldValue": "{{step_1['item']}}"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Opportunity generator",
                                                    "newFieldValue": {
                                                      "newFieldValue": "OpenOps"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Status",
                                                    "newFieldValue": {
                                                      "newFieldValue": "Created"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Workflow",
                                                    "newFieldValue": {
                                                      "newFieldValue": "{{step_26}}"
                                                    }
                                                  },
                                                  {
                                                    "fieldName": "Opportunity details",
                                                    "newFieldValue": {
                                                      "newFieldValue": "Consider upgrading this EC2 instance from {{step_b['currentInstanceType']}} to {{step_b['recommendedType']}} to benefit from improvements in the current generation. Note that new generations may sometimes be more costly, but they bring even higher performance benefits.\n\nCurrent price delta: {{step_e}} (when positive the new generation is more costly)"
                                                    }
                                                  }
                                                ]
                                              },
                                              "roundToFieldPrecision": false
                                            },
                                            "blockName": "@openops/block-openops-tables",
                                            "blockType": "OFFICIAL",
                                            "actionName": "update_record",
                                            "inputUiInfo": {
                                              "customizedInputs": {
                                                "settings": {
                                                  "input": {
                                                    "rowPrimaryKey": {
                                                      "rowPrimaryKey": true
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "packageType": "REGISTRY",
                                            "blockVersion": "~0.0.1",
                                            "errorHandlingOptions": {
                                              "retryOnFailure": {
                                                "value": false
                                              },
                                              "continueOnFailure": {
                                                "value": false
                                              }
                                            }
                                          },
                                          "displayName": "Create OpenOps opportunity",
                                          "stepIndex": 21
                                        },
                                        "displayName": "Format Monthly Price Delta",
                                        "stepIndex": 20
                                      },
                                      "displayName": "Truncate",
                                      "stepIndex": 19
                                    },
                                    "displayName": "Monthly price difference",
                                    "stepIndex": 18
                                  },
                                  "displayName": "Calculate Hourly Price Delta",
                                  "stepIndex": 17
                                },
                                "displayName": "No recommended instance price",
                                "onSuccessAction": {
                                  "id": "KPVEUN9EanlulpkEd12xZ",
                                  "name": "step_m",
                                  "type": "BLOCK",
                                  "valid": true,
                                  "settings": {
                                    "input": {},
                                    "blockName": "@openops/block-end-flow",
                                    "blockType": "OFFICIAL",
                                    "actionName": "end_workflow",
                                    "inputUiInfo": {
                                      "customizedInputs": {}
                                    },
                                    "packageType": "REGISTRY",
                                    "blockVersion": "~0.0.1",
                                    "errorHandlingOptions": {
                                      "retryOnFailure": {
                                        "value": false
                                      },
                                      "continueOnFailure": {
                                        "value": false
                                      }
                                    }
                                  },
                                  "displayName": "Skip this recommendation",
                                  "stepIndex": 16
                                },
                                "stepIndex": 15
                              },
                              "displayName": "Get Recommended Instance Price",
                              "stepIndex": 14
                            },
                            "displayName": "Get Current Instance Price",
                            "stepIndex": 13
                          },
                          "stepIndex": 12
                        },
                        "displayName": "Check if previous generation",
                        "stepIndex": 11
                      },
                      "displayName": "Opportunity doesn't exist or snooze expired",
                      "onFailureAction": {
                        "id": "jfm1wnIuecN7fTPC86A16",
                        "name": "step_30",
                        "type": "BLOCK",
                        "valid": true,
                        "settings": {
                          "input": {},
                          "blockName": "@openops/block-end-flow",
                          "blockType": "OFFICIAL",
                          "actionName": "end_workflow",
                          "inputUiInfo": {
                            "customizedInputs": {}
                          },
                          "packageType": "REGISTRY",
                          "blockVersion": "~0.0.1",
                          "errorHandlingOptions": {
                            "retryOnFailure": {
                              "value": false
                            },
                            "continueOnFailure": {
                              "value": false
                            }
                          }
                        },
                        "displayName": "Skip recommendation",
                        "stepIndex": 10
                      },
                      "stepIndex": 9
                    },
                    "displayName": "Get existing opportunity",
                    "stepIndex": 8
                  },
                  "stepIndex": 7
                },
                "displayName": "Get running instances",
                "stepIndex": 6
              },
              "stepIndex": 5
            },
            "stepIndex": 4
          },
          "displayName": "This Workflow Name",
          "stepIndex": 3
        },
        "displayName": "Format regions and accounts",
        "stepIndex": 2
      }
    },
    "valid": true,
    "description": ""
  },
  "blocks": [
    "@openops/block-webhook",
    "@openops/block-store",
    "@openops/block-aws",
    "@openops/block-openops-tables",
    "@openops/block-end-flow",
    "@openops/block-math-helper",
    "@openops/block-http"
  ],
  "categories": []
}